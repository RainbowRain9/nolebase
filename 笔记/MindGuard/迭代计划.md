# 迭代计划与版本管理

本文档定义 MindGuard 微信小程序的版本号规范、迭代节奏与跨职能协同流程，确保每次功能升级可控、可追溯并快速交付。

## 1. 版本号规范

- 采用 **Semantic Versioning** 扩展格式：`MAJOR.MINOR.PATCH-build`
  - `MAJOR`：存在兼容性破坏（如信息架构重构、数据结构调整）。
  - `MINOR`：向用户开放的新功能或显著体验改进。
  - `PATCH`：缺陷修复、性能优化、不影响功能的微调。
  - `build`（可选）：用于区分发布渠道，取值如 `alpha`（内部测试）、`beta`（灰度）、`prod`（正式）。
- 微信小程序后台版本描述需同步记录主要改动、影响范围与回滚方案链接。

## 2. 迭代节奏

| 阶段 | 时长 | 关键活动 | 输出物 |
| --- | --- | --- | --- |
| 需求梳理 | 1 周 | 基于用户反馈、数据分析（埋点漏斗、风险事件）、运营计划筛选需求，完成优先级评估 | 需求列表、OKR 对齐、范围确认 |
| 方案设计 | 1 周 | 产品交互稿、视觉验收、技术评审（参考 docs/开发方案/） | PRD 更新、设计稿、技术拆解、风险评估 |
| 开发实现 | 2 周 | 前后端开发、接口联调、埋点接入、单元测试 | 开发分支、接口文档、埋点自测报告 |
| 联调与测试 | 1 周 | QA 测试（功能、兼容、性能、安全）、灰度发布准备 | 测试用例执行记录、缺陷单、灰度计划 |
| 发布与复盘 | 0.5 周 | 微信审核、正式发布、埋点数据验证、总结复盘 | 发布公告、回滚预案、迭代复盘纪要 |

> 注：若遇紧急修复，可走 Hotfix 流程：确认缺陷 → 修复 → 回归测试（重点场景） → 提审发布，预计 1-2 天。

## 3. 版本流程

1. **迭代规划会**（每月第一周）：产品、研发、运营、心理顾问共同确认下月迭代范围，更新迭代看板。
2. **需求冻结点**：方案设计阶段末尾，冻结版本范围与上线目标。变更需经过变更评审（产品+技术负责人）。
3. **开发管理**：
   - 使用 Git Flow 简化版：`main`（稳定）+ `develop`（迭代）+ 功能分支。
   - 代码合并需通过 CI、代码 Review、埋点脚本校验。
4. **测试与验收**：
   - QA 基于 `docs/测试用例.md` 执行回归。
   - 心理顾问或运营对关键动线（情绪打卡→建议→任务→复盘、SOS）进行体验验收。
5. **灰度与发布**：
   - 灰度范围：首日 5% 校园用户 → 24 小时内观察崩溃率、接口错误率、风险事件响应。
   - 正式发布前确认埋点、运营物料、FAQ 更新到位。
   - 如遇审核驳回，根据 `docs/上线说明.md` 调整描述或权限设置后再次提交。
6. **上线后跟踪**：
   - 重点监控指标：崩溃率、接口错误率、建议→任务转化、风险事件 SLA。
   - 48 小时内输出上线快报（亮点、问题、下一步计划）。

## 4. 迭代管理工具

- **任务管理**：Jira/飞书多维表，按功能拆分任务与子任务，关联埋点、测试用例。
- **文档协同**：与 `docs/功能文档/`、`docs/页面文档/` 联动，版本更新需同步文档。
- **会议节奏**：
  - 周会：跟踪开发进度、风险、阻塞。
  - 日站会（迭代中期）：同步进展与阻塞点。
  - 复盘会：结合数据看板与用户反馈评估迭代效果。

## 5. 与用户反馈、运维的联动

- P0/P1 反馈或告警纳入下一次迭代的必修项。
- 运维复盘中识别的系统性问题（如接口稳定性）需进入技术债清单。
- FAQ 更新与上线说明同步进行，保证用户和审核渠道掌握最新信息。

## 6. 版本归档

- 每次发布需归档以下内容：
  - 版本说明（功能摘要、影响范围、回滚方案）。
  - 测试报告与关键缺陷处理记录。
  - 埋点/数据验证结果。
  - 运维监控截屏（崩溃率、错误率、SLA）。
- 归档位置：项目知识库或 docs/开发方案/迭代归档（后续可建立）。

## 7. 后续优化方向

- 建立自动化回归脚本，覆盖情绪打卡、任务闭环、树洞发帖等核心流程。
- 引入特性开关（Feature Flag），支持灰度控制和 A/B 测试。
- 结合埋点数据，动态调整迭代节奏（对高价值功能加快试验）。
- 与学校信息化系统打通，实现版本发布前的自动化安全审计。
