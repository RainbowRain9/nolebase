# 资源推送系统样式规范

> 基于《功能扩展方案》《资源推送系统》《tab页设计蓝图》《色彩系统》整理，聚焦智能推荐算法、多触发机制、个性化资源库、推送效果跟踪，确保资源推送的精准性和用户体验。

## 1. 设计定位
- **角色**：智能化资源推荐平台，提供情绪相关资源、学习资料、放松内容、专业服务。
- **体验目标**：智能精准、个性化强、时效性高、用户控制，让用户获得"被理解"和"被关怀"的感受。
- **视觉基调**：温暖的卡片式设计，渐变背景增加亲和力，强调内容的可点击性和收藏价值。

## 2. 页面结构框架
```
┌──────────────────────────────────────────┐
│ 推送设置面板：推送偏好、时间设置、隐私控制 │
├──────────────────────────────────────────┤
│ 今日推荐：基于情绪状态的智能推荐卡片     │
├──────────────────────────────────────────┤
│ 资源分类导航：视频、音频、文章、工具、活动 │
├──────────────────────────────────────────┤
│ 个性化资源库：收藏夹、历史记录、下载管理 │
├──────────────────────────────────────────┤
│ 推送效果反馈：有用性评分、推荐优化建议   │
└──────────────────────────────────────────┘
```

## 3. 模块规格详解

### 3.1 推送设置面板 `<PushSettingsPanel>`
- **容器**：宽 343px，自适应高度，背景 `#FFFFFF`，圆角 16px，阴影 `0 14px 40px rgba(15,20,26,0.08)`。
- **推送偏好设置**：
  - 情绪类型偏好（焦虑、抑郁、压力、失眠等）
  - 内容类型偏好（视频、音频、文章、工具）
  - 推送频率设置（每日、每周、仅紧急时）
  - 推送时间段选择（避免打扰时段）
- **隐私控制**：
  - 数据使用说明
  - 推送算法透明度
  - 用户反馈开关
- **数据绑定**：`push_settings`、`user_preferences`、`privacy_consents`

### 3.2 今日推荐 `<DailyRecommendations>`
- **容器**：宽 343px，自适应高度，背景 `linear-gradient(135deg,#FEF3C7,#FDE68A)`，圆角 16px。
- **推送原因说明**：
  - 顶部："基于你的焦虑情绪推荐"（14px/600/#92400E）
  - 情绪状态可视化：小图标+文字描述
- **资源卡片列表**：
  - 水平滚动，单卡片120×160px，间距12px
  - 每个卡片包含：缩略图、类型图标、标题、时长/阅读时间
  - 右上角显示推送匹配度（85%匹配）
- **操作按钮**：
  - "查看更多"链接（品牌蓝）
  - "不感兴趣"反馈按钮
- **数据绑定**：`daily_recommendations`、`push_records`、`user_feedback`

### 3.3 资源分类导航 `<ResourceCategories>`
- **分类标签**：水平滚动的Chips设计
  - 视频（短视频、长视频、电影）
  - 音频（音乐、播客、白噪音）
  - 文章（科普、经验、方法）
  - 工具（测试、练习、记录）
  - 活动（线上、线下、团体）
- **筛选条件**：
  - 时长筛选（<5min、5-15min、>15min）
  - 难度等级（入门、进阶、专业）
  - 语言偏好（中文、英文）
  - 免费筛选（仅免费、包含付费）
- **排序选项**：
  - 相关度优先
  - 最新发布
  - 热门程度
  - 用户评分
- **数据绑定**：`resource_categories`、`filter_conditions`、`sort_options`

### 3.4 资源详情页 `<ResourceDetail>`
- **顶部信息区**：
  - 封面图（全屏宽度，自适应高度）
  - 返回按钮、分享按钮、收藏按钮
  - 资源标题、类型标签、评分显示
- **内容介绍**：
  - 资源描述（支持富文本）
  - 适用人群说明
  - 专家推荐语
  - 相关标签云
- **互动操作**：
  - 播放/阅读按钮（主CTA）
  - 下载按钮（离线使用）
  - 收藏按钮（加入个人库）
  - 反馈按钮（有用性评分）
- **相关推荐**：
  - "你可能也喜欢"推荐区块
  - 基于当前资源的相关推荐
  - 横向滚动的相关资源卡片
- **数据绑定**：`resource_details`、`user_interactions`、`related_resources`

### 3.5 个性化资源库 `<PersonalLibrary>`
- **库入口**：我的Tab中的资源库入口
- **分类管理**：
  - 我的收藏（用户主动收藏的资源）
  - 历史记录（浏览过的资源）
  - 下载管理（离线资源）
  - 自定义分类（用户创建的分类）
- **搜索功能**：
  - 全文搜索（标题、描述、标签）
  - 高级筛选（类型、时长、评分等）
  - 搜索历史和推荐
- **统计信息**：
  - 资源总数统计
  - 使用时长统计
  - 偏好分析图表
- **数据绑定**：`personal_library`、`user_collections`、`usage_statistics`

### 3.6 推送效果反馈 `<FeedbackSystem>`
- **即时反馈**：
  - 资源卡片底部的快速反馈（👍/👎）
  - 推送原因的准确性反馈
  - 内容质量的评分（1-5星）
- **深度反馈**：
  - 详细反馈表单（可选）
  - 改进建议收集
  - 个性化期望表达
- **反馈结果展示**：
  - "感谢您的反馈"确认提示
  - 推荐算法优化的透明说明
  - 基于反馈的即时调整预览
- **数据绑定**：`feedback_records`、`algorithm_adjustments`、`improvement_suggestions`

## 4. 色彩与排版基准

### 4.1 关键色值
| 元素 | 颜色值 | 建议映射 |
| ---- | ------ | -------- |
| 推荐背景渐变 | linear-gradient(135deg,#FEF3C7,#FDE68A) | amber-50 to amber-100 |
| 视频类资源 | #EF4444 | red-500 |
| 音频类资源 | #8B5CF6 | purple-500 |
| 文章类资源 | #3B82F6 | blue-500 |
| 工具类资源 | #10B981 | green-500 |
| 活动类资源 | #F59E0B | amber-500 |
| 反馈按钮积极 | #22C55E | success-500 |
| 反馈按钮消极 | #EF4444 | red-500 |

### 4.2 卡片样式规范
```scss
.resource-card {
  background: #FFFFFF;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 8px 24px rgba(15,20,26,0.08);
  transition: all 0.3s ease;

  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 32px rgba(15,20,26,0.12);
  }

  .resource-thumbnail {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 12px 12px 0 0;
  }

  .resource-type-indicator {
    position: absolute;
    top: 8px;
    right: 8px;
    background: rgba(0,0,0,0.7);
    color: #FFFFFF;
    border-radius: 999px;
    padding: 4px 8px;
    font-size: 10px;
    font-weight: 600;
  }

  .match-score {
    position: absolute;
    top: 8px;
    left: 8px;
    background: var(--color-success-500);
    color: #FFFFFF;
    border-radius: 999px;
    padding: 4px 8px;
    font-size: 10px;
    font-weight: 600;
  }
}

.recommendation-container {
  background: linear-gradient(135deg,#FEF3C7,#FDE68A);
  border-radius: 16px;
  padding: 24px;
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="20" cy="20" r="2" fill="%23F59E0B" opacity="0.3"/><circle cx="80" cy="40" r="3" fill="%23F59E0B" opacity="0.2"/><circle cx="40" cy="80" r="2" fill="%23F59E0B" opacity="0.4"/></svg>');
    opacity: 0.5;
  }
}

.feedback-buttons {
  display: flex;
  gap: 8px;
  margin-top: 12px;

  .feedback-btn {
    border: none;
    background: var(--color-gray-100);
    border-radius: 8px;
    padding: 8px 16px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s ease;

    &:hover {
      background: var(--color-gray-200);
    }

    &.positive {
      color: var(--color-success-500);
    }

    &.negative {
      color: var(--color-red-500);
    }

    &.selected {
      background: var(--color-brand-100);
      color: var(--color-brand-600);
    }
  }
}
```

### 4.3 动画效果
- **卡片入场动画**：渐显+上滑，0.4s ease-out
- **按钮点击反馈**：缩放0.95，0.1s ease-in-out
- **页面转场动画**：右滑进入，左滑退出，0.3s ease-in-out
- **加载动画**：呼吸效果的脉冲动画，1.5s循环

## 5. 交互与状态要求

### 5.1 推送触发机制
1. **情绪触发**：
   - 检测到负面情绪标签（焦虑、抑郁、压力等）
   - 情绪强度超过阈值自动触发
   - 根据情绪类型推送对应资源
2. **行为触发**：
   - 连续多天情绪恶化
   - 睡眠质量下降
   - 社交活动减少
   - 任务完成率降低
3. **时间触发**：
   - 定时推送（如晚间放松资源）
   - 特殊时间点（考试周、假期）
   - 用户设置的提醒时间
4. **手动触发**：
   - 用户主动请求推荐
   - 完成某个动作后的相关推荐
   - 基于搜索历史的推荐

### 5.2 用户控制机制
1. **推送开关**：
   - 总开关控制所有推送
   - 分类推送独立开关
   - 紧急推送强制开启
2. **反馈机制**：
   - 即时反馈（👍/👎）
   - 详细反馈表单
   - 推荐准确性评分
3. **个性化设置**：
   - 推送频率设置
   - 时间偏好设置
   - 内容偏好设置
4. **隐私控制**：
   - 数据使用说明
   - 算法透明度
   - 数据导出和删除

### 5.3 资源交互流程
1. **资源发现**：
   - 推送卡片点击进入详情
   - 分类浏览探索资源
   - 搜索精准定位资源
2. **资源消费**：
   - 在线播放/阅读
   - 下载离线使用
   - 分享给他人
3. **资源管理**：
   - 收藏到个人库
   - 分类管理收藏
   - 使用历史记录
4. **效果跟踪**：
   - 使用时长统计
   - 效果评分收集
   - 行为改变记录

## 6. 智能推荐算法

### 6.1 推荐维度
1. **情绪匹配**：
   - 当前情绪状态
   - 情绪变化趋势
   - 历史情绪模式
2. **内容特征**：
   - 资源类型标签
   - 专业领域分类
   - 难度等级评估
3. **用户画像**：
   - 个人偏好设置
   - 历史行为数据
   - 人口统计学特征
4. **情境因素**：
   - 时间段特征
   - 使用场景
   - 环境因素

### 6.2 算法优化
1. **冷启动处理**：
   - 基于用户注册信息的初始推荐
   - 热门资源推荐
   - 快速偏好学习
2. **实时调整**：
   - 基于反馈的即时调整
   - A/B测试优化
   - 多目标平衡
3. **长期优化**：
   - 用户行为模式学习
   - 推荐效果评估
   - 算法模型迭代

### 6.3 推荐透明度
1. **推荐原因说明**：
   - "基于你的焦虑情绪推荐"
   - "因为你喜欢过类似内容"
   - "热门资源推荐"
2. **算法解释**：
   - 推荐逻辑的简化说明
   - 用户控制权说明
   - 数据使用说明
3. **效果反馈**：
   - 推荐准确率统计
   - 用户满意度调查
   - 持续改进说明

## 7. 数据与工作流

### 7.1 数据模型
| 数据类型 | 字段说明 | 用途 |
| -------- | -------- | ---- |
| 推荐记录 | 推荐ID、用户ID、资源ID、触发原因、匹配度、时间戳 | 追踪推荐效果 |
| 用户反馈 | 反馈ID、推荐ID、反馈类型、评分、详细内容、时间戳 | 优化推荐算法 |
| 资源信息 | 资源ID、类型、标题、描述、标签、时长、难度评分、质量评分 | 推荐候选池 |
| 用户行为 | 行为ID、用户ID、资源ID、行为类型、时长、完成度、时间戳 | 用户画像构建 |

### 7.2 工作流程
1. **触发检测**：监测用户状态变化 → 判断是否需要推送 → 确定推送优先级
2. **候选生成**：根据触发条件筛选资源 → 计算匹配度分数 → 排序候选资源
3. **推送执行**：生成推送通知 → 发送至用户端 → 记录推送日志
4. **效果跟踪**：监测用户响应 → 收集用户反馈 → 分析推送效果 → 优化推荐算法

## 8. 性能与优化

### 8.1 性能要求
- 推荐响应时间 < 500ms
- 资源加载时间 < 2s
- 离线资源缓存 < 50MB
- 推送成功率 > 95%

### 8.2 优化策略
1. **预加载策略**：
   - 预测用户需求提前加载
   - 智能缓存热门资源
   - 离线包管理
2. **资源优化**：
   - 图片自适应压缩
   - 视频多码率选择
   - CDN加速分发
3. **算法优化**：
   - 推荐计算异步处理
   - 结果缓存复用
   - 轻量级模型部署

## 9. 无障碍与验收

### 9.1 无障碍要求
- 所有资源卡片支持键盘导航
- 视频和音频提供字幕和文字稿
- 色彩编码有备选识别方式
- 支持屏幕阅读器

### 9.2 验收清单
1. 推送设置功能完整，用户可自主控制
2. 推荐算法精准，匹配度评分准确
3. 资源分类清晰，筛选功能正常
4. 反馈机制有效，能持续优化推荐
5. 性能达标，用户体验流畅
6. 隐私保护完善，数据使用透明

---

该规范确保资源推送系统既智能又人性化，通过精准的推荐算法和完善的用户控制机制，为用户提供真正有价值的心理健康资源。