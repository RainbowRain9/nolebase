# 功能：SOS 安全守护流程

## 功能简介
提供长按 2 秒呼出的 SOS 安全通道，整合多级风险预警机制、稳定化脚本、紧急联系人和人工转介流程，实现危机时的快速响应、最小必要信息共享与完整的干预闭环。

## 所在页面
- Tab：全局悬浮（与 FAB 同位）
- 专属安全页：稳定化步骤、联系人、转介说明
- 风险预警页面：不同风险等级的预警界面
- 人工转介页面：专业帮助转介流程

## 核心功能模块

### 1. 多级风险预警机制
- **L1级（低风险）**：温和提醒，提供自助资源
- **L2级（中风险）**：主动关怀，推荐专业资源
- **L3级（高风险）**：紧急干预，强烈建议人工介入
- **L4级（危机）**：立即响应，强制转介专业帮助

### 2. 稳定化脚本系统
- **呼吸练习**：引导式呼吸放松训练
- **环境确认**：帮助用户确认当前环境安全
- **情绪稳定**：快速情绪调节技巧
- **认知 grounding**：帮助用户回到现实状态

### 3. 紧急联系人网络
- **校内资源**：心理中心、辅导员、校医院
- **守护人**：用户自愿添加的紧急联系人
- **公益热线**：专业心理援助热线
- **紧急服务**：120、110等紧急服务

### 4. 人工转介流程
- **授权管理**：基于用户显性授权的信息共享
- **信息摘要**：生成最小必要的匿名信息摘要
- **转介跟踪**：完整的转介过程跟踪和记录
- **后续跟进**：转介后的持续跟进和支持

## 交互说明

### SOS触发流程
1. **触发方式**：
   - 长按SOS按钮2秒触发
   - 系统检测到L4级风险自动触发
   - 连续多次表达消极内容智能触发
   - 用户语音命令紧急触发

2. **触发响应**：
   - 立即显示全屏紧急界面
   - 播放安抚语音和引导语
   - 显示稳定化脚本第一步
   - 记录触发事件和时间戳

### 稳定化流程
1. **呼吸引导**：
   - 显示呼吸动画和计时器
   - 提供语音引导和节奏提示
   - 用户完成打勾确认
   - 自动进入下一步骤

2. **环境确认**：
   - 引导用户观察周围环境
   - 确认当前是否处于安全状态
   - 提供安全评估选项
   - 根据评估结果调整后续流程

3. **情绪稳定**：
   - 提供快速情绪调节技巧
   - 引导用户进行情绪命名
   - 推荐即时可用的调节方法
   - 监测情绪变化效果

4. **认知 grounding**：
   - 引导用户进行5-4-3-2-1练习
   - 帮助用户重新连接现实
   - 提供感官刺激建议
   - 确认用户恢复稳定状态

### 紧急联系流程
1. **联系人选择**：
   - 展示紧急联系人列表
   - 按优先级和可用性排序
   - 显示联系人的响应状态
   - 提供联系人详细信息

2. **联系方式选择**：
   - 支持匿名/实名联系方式
   - 提供多种联系渠道选择
   - 显示预计响应时间
   - 提供联系历史记录

3. **授权确认**：
   - 显示信息共享范围
   - 说明授权后果和撤销方式
   - 要求用户明确授权
   - 记录授权过程和结果

4. **联系执行**：
   - 执行选择的联系操作
   - 提供联系进度反馈
   - 记录联系结果
   - 引导后续跟进步骤

### 人工转介流程
1. **风险评估**：
   - 基于当前状态进行风险评估
   - 确定转介的必要性和紧急程度
   - 选择合适的转介对象
   - 准备转介所需信息

2. **信息准备**：
   - 生成最小必要的匿名信息摘要
   - 包含风险评估和关键背景信息
   - 提供专业的转介建议
   - 准备转介相关文档

3. **转介执行**：
   - 向目标转介对象发送信息
   - 提供转介的上下文和建议
   - 确认转介信息接收
   - 建立转介跟踪机制

4. **后续跟进**：
   - 跟踪转介后的处理情况
   - 记录转介结果和反馈
   - 安排必要的后续跟进
   - 完成转介闭环记录

## 界面元素

### SOS界面组件
- **SOS悬浮按钮**：椭圆56×24px，危险红背景，长按出现渐变进度环
- **紧急全屏界面**：深色背景，红色强调，清晰的紧急提示
- **稳定化脚本卡片**：步骤式引导界面，包含进度指示
- **联系人选择器**：网格布局的联系人选择界面
- **授权确认弹窗**：详细的授权说明和确认界面

### 稳定化组件
- **呼吸动画器**：可视化的呼吸节奏引导动画
- **进度指示器**：显示当前步骤和总体进度
- **完成标记器**：步骤完成的勾选确认
- **语音播放器**：语音引导的播放控制
- **计时器组件**：练习时间的倒计时显示

### 联系人组件
- **联系人卡片**：包含头像、姓名、关系、响应状态
- **联系方式选择器**：电话、消息、邮件等联系方式选择
- **响应状态指示器**：在线、忙碌、离线等状态显示
- **联系历史记录**：过往联系记录的查看界面
- **优先级标记器**：联系人的优先级标识

### 转介组件
- **风险评估器**：风险评估的显示和确认界面
- **信息摘要生成器**：自动生成的信息摘要显示
- **转介对象选择器**：转介目标的选择界面
- **转介进度跟踪器**：转介过程的进度显示
- **跟进提醒器**：后续跟进的提醒设置

## 预警触发机制

### 自动触发条件
1. **语言内容触发**：
   - 检测到自伤、自杀相关关键词
   - 表达强烈的无望感和绝望
   - 多次提及死亡或结束生命
   - 出现明确的伤害意图表达

2. **行为模式触发**：
   - 连续多天情绪持续恶化
   - 行为异常（如长时间不活动）
   - 社交完全隔离
   - 任务完全停滞

3. **生理指标触发**：
   - 睡眠严重紊乱
   - 饮食异常变化
   - 活动量急剧下降
   - 生理状态异常报告

### 风险等级判断
- **L1级**：轻微负面情绪，日常困扰
- **L2级**：明显情绪困扰，影响正常功能
- **L3级**：严重情绪问题，需要专业介入
- **L4级**：危机状态，需要立即干预

### 预警响应策略
- **L1级**：推送自助资源，建议使用CBT工具
- **L2级**：主动关怀，推荐专业资源，建议联系辅导员
- **L3级**：强烈建议人工介入，提供紧急联系方式
- **L4级**：立即触发SOS流程，强制联系专业帮助

## 数据需求

### 事件数据
- `sos_events`：SOS触发事件记录，包含触发方式、时间、位置
- `risk_assessments`：风险评估记录，包含评估结果和依据
- `intervention_records`：干预过程记录，包含所有干预步骤和结果
- `followup_records`：跟进记录，包含后续跟进和结果

### 联系人数据
- `emergency_contacts`：紧急联系人信息表
- `contact_attempts`：联系尝试记录表
- `contact_responses`：联系响应记录表
- `contact_history`：联系历史记录表

### 转介数据
- `referral_requests`：转介请求记录表
- `referral_responses`：转介响应记录表
- `referral_outcomes`：转介结果记录表
- `referral_followups`：转介跟进记录表

### 审计数据
- `sos_audit_logs`：SOS相关操作审计日志
- `consent_records`：授权记录表
- `privacy_compliance_logs`：隐私合规记录表
- `security_incident_logs`：安全事件记录表

## 安全机制

### 数据安全
- **实时加密**：所有SOS相关数据实时加密存储
- **访问控制**：严格的数据访问权限控制
- **备份机制**：重要数据的多重备份
- **完整性保护**：数据完整性验证和保护

### 通信安全
- **加密通信**：所有通信采用端到端加密
- **身份验证**：严格的身份验证机制
- **安全通道**：专用的安全通信通道
- **防窃听**：防窃听和防干扰措施

### 物理安全
- **设备安全**：设备安全状态检测
- **环境安全**：使用环境安全评估
- **位置保护**：用户位置信息保护
- **紧急定位**：紧急情况下的定位服务

## 合规要求

### 法律法规
- **精神卫生法**：符合精神卫生相关法律要求
- **紧急救援法**：遵守紧急救援相关法规
- **医疗急救法**：符合医疗急救相关法律
- **隐私保护法**：遵守隐私保护相关法律

### 行业标准
- **危机干预标准**：符合危机干预行业标准
- **心理急救标准**：符合心理急救标准
- **转介服务标准**：符合转介服务标准
- **应急响应标准**：符合应急响应标准

### 伦理要求
- **知情同意**：确保用户的知情同意权
- **最小伤害**：遵循最小伤害原则
- **受益最大化**：追求用户利益最大化
- **自主尊重**：尊重用户的自主决定权

## 效果评估

### 响应效果
- **响应时间**：SOS触发到响应的平均时间
- **解决率**：紧急情况的解决成功率
- **满意度**：用户对SOS服务的满意度
- **安全感**：用户使用SOS后的安全感提升

### 转介效果
- **转介成功率**：成功转介的比例
- **接受率**：用户接受转介建议的比例
- **配合度**：用户配合专业帮助的程度
- **改善率**：转介后的状况改善率

### 长期效果
- **复发率**：问题复发的控制率
- **恢复率**：完全恢复的比例
- **功能恢复**：社会功能恢复情况
- **生活质量**：生活质量的改善情况

## 后续优化

### 功能扩展
1. **智能预警**：基于机器学习的智能预警系统
2. **多模态交互**：支持语音、图像等多模态交互
3. **地理位置服务**：基于地理位置的紧急资源推荐
4. **社区支持**：引入同伴支持和社区资源

### 技术优化
1. **实时分析**：实时情绪和行为分析
2. **预测模型**：风险预测和预警模型
3. **智能推荐**：个性化干预方案推荐
4. **自动化流程**：部分流程的自动化处理

### 服务优化
1. **专业培训**：辅导员和专业人员的培训
2. **资源整合**：更多专业资源的整合
3. **服务网络**：建立完整的服务网络
4. **质量监控**：服务质量的监控和改进
