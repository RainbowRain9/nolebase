# 功能：学校协同系统

## 功能简介
建立学生与学校心理支持体系的深度连接，实现学校信息绑定、辅导员协同、校内资源整合和人工转介流程，形成完整的校内外心理健康支持网络。

## 所在页面
- 学生端：我的 Tab · 学校设置、资源地图导航
- 辅导员端：独立的管理后台界面
- 管理员端：系统管理后台
- 全局：风险预警通知、任务指派、进度跟踪

## 核心功能模块

### 1. 学校信息绑定
- **学校认证**：学生通过学号或学校邮箱进行学校认证
- **院系选择**：选择所属院系和专业信息
- **辅导员匹配**：自动或手动匹配对应的辅导员
- **班级信息**：班级、年级等基础信息绑定

### 2. 辅导员协同工作台
- **学生管理**：查看所负责学生的基本信息和心理状况概览
- **预警通知**：接收学生的风险预警通知和详细信息
- **任务指派**：为学生指派关怀任务和跟进计划
- **沟通渠道**：安全私聊功能，支持文字、语音、视频
- **进度跟踪**：跟踪学生任务完成情况和心理状况变化

### 3. 校内资源整合
- **资源地图**：整合校内心理咨询中心、辅导员办公室等资源
- **预约系统**：在线预约心理咨询和辅导员面谈
- **活动管理**：校内心理健康活动的发布和报名
- **知识库**：校内心理健康知识库和政策文件

### 4. 人工转介流程
- **预警分级**：基于风险等级确定转介优先级
- **信息摘要**：生成最小必要的匿名信息摘要
- **授权管理**：学生授权后的信息共享机制
- **转介记录**：完整的转介过程和结果记录
- **后续跟进**：转介后的持续跟进和支持

## 交互说明

### 学生端交互

#### 学校绑定流程
1. **进入学校设置**：在"我的"页面找到"学校信息"入口
2. **选择学校**：从列表中选择所在学校或搜索学校名称
3. **身份验证**：通过学号、学校邮箱或其他方式进行身份验证
4. **完善信息**：填写院系、专业、班级等基本信息
5. **辅导员匹配**：系统自动匹配辅导员，支持手动调整
6. **绑定完成**：显示学校信息和辅导员联系方式

#### 辅导员沟通
1. **发起沟通**：在需要时可以向辅导员发起安全沟通
2. **消息类型**：支持文字、语音、图片、文件等多种消息类型
3. **响应状态**：显示消息已读状态和预计响应时间
4. **预约功能**：可以直接预约线下面谈时间
5. **反馈评价**：对沟通效果进行反馈和评价

#### 资源预约
1. **浏览资源**：在资源地图中查看校内心理支持资源
2. **在线预约**：选择心理咨询师或辅导员进行预约
3. **时间段选择**：选择合适的预约时间段
4. **问题描述**：简要描述需要咨询的问题
5. **预约确认**：收到预约确认和提醒通知

### 辅导员端交互

#### 工作台概览
1. **学生列表**：显示所负责学生的基本信息和当前状态
2. **预警统计**：显示不同风险等级的学生数量和趋势
3. **任务概览**：显示待处理任务和进行中的跟进计划
4. **快速操作**：常用功能的快速入口
5. **消息通知**：系统通知和消息提醒

#### 预警处理流程
1. **接收预警**：收到学生风险预警通知，包含风险等级和关键信息
2. **详细信息查看**：查看学生的详细心理状况和行为数据
3. **风险评估**：基于系统提供的信息进行专业风险评估
4. **干预计划**：制定个性化的干预计划和跟进策略
5. **执行跟踪**：执行干预计划并跟踪效果

### 心理咨询师/学校端用户流程

心理咨询师/辅导员（学校端）的工作流程严格遵循**"隐私优先、用户授权、最小信息、全程留痕"**的原则。

#### 1. 预警接收与信息处理
- **匿名预警接收**：当学生出现高风险行为（如L3级帖子）或主动求助时，系统会向后台的值班老师（辅导员/心理咨询师）推送一条**匿名的预警信息**
- **最小必要信息**：预警只包含脱敏后的风险等级、关键词和时间戳等**最小必要信息**，不泄露学生身份
- **等待用户授权**：专业人员无法直接联系学生或查看其详细资料，只能看到后台队列中的匿名预警

#### 2. 用户授权与协同机制
- **用户主动授权**：等待学生**主动发起"请求真人协助"或在系统提示下明确"同意"授权**
- **加密私聊通道**：获得学生授权后，系统会为专业人员开通一个与该学生的**加密私聊通道**
- **真人任务指派**：允许专业人员向学生指派**"真人任务"**
- **全程审计留痕**：所有授权记录（范围、有效期）和后续的查看、沟通行为都会被写入**审计日志 (audit_logs)**，确保流程合规

#### 3. 协同工作与闭环反馈
- **任务执行跟踪**：专业人员可以跟踪学生任务的执行情况
- **回执通知机制**：当学生完成指派的任务（例如，完成一次线下约谈后提交反馈），专业人员会收到**回执通知**
- **权限即时中止**：如果学生在"我的"页面撤销了授权，对应人员也会收到通知，访问权限立即中止
- **数据安全保障**：所有协同过程中的数据交换都经过加密处理，确保学生隐私安全

#### 任务管理
1. **任务创建**：为学生创建关怀任务和跟进计划
2. **任务分配**：将任务分配给相关的辅导员或心理老师
3. **进度跟踪**：跟踪任务执行情况和效果
4. **结果评估**：评估任务执行效果和学生改善情况
5. **经验总结**：总结经验教训，优化干预策略

### 管理员端交互

#### 学校管理
1. **学校信息管理**：管理合作学校的基本信息和状态
2. **院系管理**：管理学校的院系和专业信息
3. **人员管理**：管理辅导员和心理老师的账号和权限
4. **资源管理**：管理校内心理支持资源和设施
5. **政策设置**：设置学校相关的政策和规定

#### 数据统计
1. **使用统计**：统计系统的使用情况和活跃度
2. **效果分析**：分析干预措施的效果和影响
3. **趋势分析**：分析学生心理状况的变化趋势
4. **资源利用率**：分析各种资源的使用效率
5. **报告生成**：生成各类统计报告和分析图表

## 界面组件

### 学生端界面
- **学校信息卡片**：显示学校、院系、辅导员等基本信息
- **辅导员联系方式**：显示辅导员的联系方式和在线状态
- **资源地图**：校内心理支持资源的地图展示
- **预约日历**：在线预约的日历界面
- **安全聊天界面**：与辅导员的安全聊天界面

### 辅导员端界面
- **工作台仪表板**：学生状态、预警统计、任务概览的仪表板
- **学生详情页**：学生详细信息和心理状况的展示页
- **预警处理界面**：预警信息处理和干预计划制定界面
- **任务管理界面**：任务创建、分配、跟踪的管理界面
- **数据分析界面**：学生数据分析的图表展示界面

### 管理员端界面
- **学校管理界面**：学校信息和人员管理的界面
- **系统设置界面**：系统配置和权限设置的界面
- **数据统计界面**：各类统计数据的展示界面
- **报告生成界面**：报告生成和导出的界面
- **日志查看界面**：系统日志和操作记录的查看界面

## 数据需求

### 学校数据
- `schools`：学校基本信息表
- `departments`：院系信息表
- `majors`：专业信息表
- `classes`：班级信息表
- `school_staff`：学校教职工信息表

### 用户数据
- `user_school_info`：用户学校关联信息表
- `counselor_assignments`：辅导员分配关系表
- `student_profiles`：学生详细档案表
- `staff_profiles`：教职工详细档案表

### 协同数据
- `risk_alerts`：风险预警记录表
- `intervention_plans`：干预计划表
- `followup_tasks`：跟进任务表
- `communication_logs`：沟通记录表
- `appointment_records`：预约记录表

### 资源数据
- `campus_resources`：校内资源表
- `resource_categories`：资源分类表
- `booking_slots`：预约时间段表
- `booking_records`：预约记录表
- `activity_records`：活动记录表

## 权限控制

### 学生权限
- **查看权限**：查看自己的学校信息和辅导员联系方式
- **沟通权限**：与辅导员进行安全沟通
- **预约权限**：预约校内心理支持资源
- **反馈权限**：对服务进行反馈和评价
- **隐私控制**：控制个人信息的共享范围

### 辅导员权限
- **学生信息查看**：查看所负责学生的基本信息和心理状况
- **预警接收**：接收学生的风险预警通知
- **任务管理**：创建和分配关怀任务
- **沟通权限**：与学生进行安全沟通
- **报告生成**：生成学生状况报告

### 管理员权限
- **系统管理**：管理系统配置和用户权限
- **数据查看**：查看系统的所有数据
- **报表生成**：生成各类统计报表
- **权限分配**：分配和管理用户权限
- **系统维护**：进行系统维护和优化

## 安全保障

### 数据安全
- **加密传输**：所有数据传输采用加密方式
- **访问控制**：严格的数据访问权限控制
- **审计日志**：完整的操作审计日志记录
- **备份机制**：定期数据备份和灾难恢复

### 隐私保护
- **匿名化处理**：学生数据匿名化处理，保护隐私
- **最小必要原则**：只收集和处理必要的信息
- **用户授权**：基于用户授权的信息共享机制
- **数据脱敏**：敏感数据的脱敏处理

### 合规要求
- **法律法规**：符合相关法律法规要求
- **学校政策**：遵守学校的相关政策和规定
- **行业标准**：符合心理健康服务的行业标准
- **伦理规范**：遵循心理咨询的伦理规范

## 效果评估

### 使用效果
- **覆盖率**：学生使用系统的覆盖率
- **活跃度**：系统的日常活跃度
- **满意度**：用户对系统的满意度
- **实用性**：系统功能的实用性评估

### 干预效果
- **预警准确率**：风险预警的准确率
- **干预成功率**：干预措施的成功率
- **改善率**：学生心理状况的改善率
- **复发率**：问题复发的控制率

### 运营效果
- **资源利用率**：校内资源的利用效率
- **响应时间**：预警响应的平均时间
- **解决时间**：问题解决的平均时间
- **成本效益**：系统的成本效益分析

## 后续优化

### 功能扩展
1. **家长端**：开发家长端，支持家长参与和监督
2. **教师端**：开发教师端，支持教师参与学生关怀
3. **医校合作**：与医疗机构合作，提供专业支持
4. **社区联动**：与社区资源联动，形成完整支持网络

### 技术优化
1. **智能预警**：提升风险预警的准确性和及时性
2. **个性化推荐**：优化个性化推荐的精准度
3. **多端同步**：实现多端数据的实时同步
4. **智能分析**：增强数据分析的智能化水平

### 服务优化
1. **培训体系**：建立辅导员和学生的培训体系
2. **支持机制**：完善技术支持和服务保障机制
3. **反馈渠道**：建立多样化的用户反馈渠道
4. **持续改进**：建立持续改进的机制和流程