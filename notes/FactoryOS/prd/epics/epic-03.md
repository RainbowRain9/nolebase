# Epic 3: 项目管理（对话 + 甘特/看板/成本/周交付）

权威来源：../../prd.md#L756


**Epic 目标：** 覆盖项目全生命周期，对话驱动创建/查询/调整，配合甘特/看板/成本/周交付视图与模板中心。

**Epic 描述（现状与增强）：**
- 现有：有基础表格/上传等 Mock 能力，缺少对话驱动与视图间上下文互通。
- 增强：统一对话入口，模板中心与视图（甘特/看板/列表/成本/周交付）互通，生成卡片化周报与纠偏建议。

**Stories（概览）：**
- 见下方 Story 3.1–3.3 的详细验收要点。

**兼容性要求：**
- 不破坏现有菜单/权限；导入导出格式兼容现有模板。
- 甘特/看板采用既有 UI 规范；对话动作经权限网关与审计。

**风险与回滚：**
- 风险：复杂依赖/关键路径计算影响前端性能；成本口径不一致。
- 缓解：服务端预计算与分页；统一口径配置与校验；
- 回滚：关闭对话驱动，保留传统视图操作。

**完成定义（DoD）：**
- Story 3.1–3.3 验收通过；
- 视图互通（从卡片跳转保持上下文）；
- 关键报表可导出并附审计；
- E2E 场景覆盖“创建-跟踪-周报”。

**验证清单（自检）：**
- 范围：对话/模板中心/视图互通/成本与周交付；
- 风险：前后端分担计算与缓存策略已验证；
- 完整：有演示用例与数据集。

#### Story 3.1: 对话（项目）与模板中心
验收要点：
1. 自然语言创建项目/任务、调整里程碑/依赖/资源。
2. 一键套用项目/任务模板并可参数化。
3. 生成“周报/风险/纠偏建议”卡片。

验收标准（Given-When-Then）：
- Given 用户进入“对话（项目）”视图
  When 输入“创建项目并添加两个里程碑”
  Then 自动创建项目与里程碑并回显操作卡片，可进一步编辑确认
- Given 模板中心存在“标准实施模板”
  When 在对话中选择套用该模板并传入参数
  Then 系统按参数化结果创建任务结构并生成周报/风险建议卡片

#### Story 3.2: 甘特/看板/列表
验收要点：
1. 甘特支持依赖/关键路径、拖拽调整；看板支持泳道/在制限制。
2. 列表支持多维筛选与批量操作。
 3. 视图与对话互通：卡片跳转视图并保持上下文。

验收标准（Given-When-Then）：
- Given 甘特图存在任务依赖
  When 拖拽调整任务日期
  Then 系统实时重新计算关键路径并保存更新，审计记录变更
- Given 对话返回“查看任务详情”卡片
  When 点击“在看板中查看”
  Then 跳转至看板并定位对应卡片，筛选上下文保持一致

#### Story 3.3: 成本分析与周交付
验收要点：
1. 预算/实际/偏差/预测；维度：人工/材料/设备。
2. 周交付计划与状态跟踪；异常预警与处理卡片。
3. 可生成报表并派发审批/归档。

验收标准（Given-When-Then）：
- Given 已录入预算与实际成本
  When 打开成本分析视图
  Then 展示预算/实际/偏差/预测并可按维度切换
- Given 本周交付存在延迟风险
  When 风险命中阈值
  Then 生成预警卡片并可一键派发审批或创建纠偏任务

