---
created: 2025-05-24T17:19
updated: 2025-05-24T17:59
---
# 飞控代码更新

在将算法写入飞控系统时，是否会覆盖之前的算法，取决于具体的写入方式和开发环境。以下是三种常见的更新方式：

## 1. 固件更新（覆盖写入）
- **情况描述**：如果你是通过标准的固件更新流程将新的算法写入飞控硬件，那么通常会覆盖之前的所有代码。
- **适用场景**：当你对飞控的核心功能进行了修改（如姿态控制算法、导航算法等），或者对飞控固件进行了较大的更新时，通常需要通过固件更新的方式写入代码。
- **操作过程**：
  - 将包含新算法的完整固件编译成二进制文件（如`.bin`或`.elf`文件）。
  - 使用飞控硬件配套的写入工具（如`Mission Planner`、`QGroundControl`或`STM32CubeProgrammer`等）将固件写入飞控硬件。
- **影响**：这种方式会完全覆盖之前的代码和配置，因此在写入之前最好备份重要的参数和配置。

## 2. 模块化更新（部分覆盖）
- **情况描述**：如果你的飞控系统支持模块化开发或分层架构，则可以在不完全覆盖原有代码的情况下更新特定的算法模块。
- **适用场景**：当你只对某个特定功能模块（如图像识别算法）进行了更新，而飞控的核心功能未发生变化时，可以采用这种方式。
- **操作过程**：
  - 将新算法编译为一个独立的模块或库文件（如`.so`文件或Python包）。
  - 将新模块上传到飞控系统的文件系统中，替换旧的模块文件。
- **影响**：这种方式只会更新特定模块，不会影响其他部分的代码和配置。

## 3. 脚本式更新（非覆盖写入）
- **情况描述**：如果你是通过脚本的方式运行算法（如在地面站或机载计算模块上运行Python脚本），则不会覆盖飞控固件中的代码。
- **适用场景**：当你在飞控外部运行算法（如在树莓派上运行图像识别算法），而飞控的核心功能由固件控制时，可以采用这种方式。
- **操作过程**：
  - 将新算法的脚本文件（如`.py`文件）上传到运行环境（如树莓派）中。
  - 修改启动脚本或任务调度程序，以运行新的算法脚本。
- **影响**：这种方法不会影响飞控固件中的代码，可以保留原有的功能和配置。

在实际操作中，你需要根据具体的飞控系统架构和开发需求选择合适的代码更新方式。如果不确定写入方式对系统的影响，建议先在模拟环境中进行测试，确保新算法的正确性和系统的稳定性。