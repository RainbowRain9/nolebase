# MindGuard å¼€å‘è€…æŒ‡å—

> **MindGuard** å¿ƒç†å¥åº·æ”¯æŒå°ç¨‹åºå¼€å‘æŒ‡å—
>
> ç‰ˆæœ¬ï¼šv1.0.0 | æ›´æ–°æ—¶é—´ï¼š2025å¹´10æœˆ20æ—¥
>
- [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
- [å¼€å‘ç¯å¢ƒæ­å»º](#å¼€å‘ç¯å¢ƒæ­å»º)
- [é¡¹ç›®ç»“æ„è¯´æ˜](#é¡¹ç›®ç»“æ„è¯´æ˜)
- [å¼€å‘æµç¨‹](#å¼€å‘æµç¨‹)
- [ä»£ç è§„èŒƒ](#ä»£ç è§„èŒƒ)
- [æµ‹è¯•æŒ‡å—](#æµ‹è¯•æŒ‡å—)
- [éƒ¨ç½²æµç¨‹](#éƒ¨ç½²æµç¨‹)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [æ‰©å±•å¼€å‘](#æ‰©å±•å¼€å‘)

---

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç®€ä»‹

MindGuard æ˜¯ä¸€ä¸ªé¢å‘é«˜æ ¡åœºæ™¯çš„å¿ƒç†å¥åº·æ”¯æŒå¾®ä¿¡å°ç¨‹åºï¼Œé€šè¿‡"æƒ…ç»ªæ‰“å¡ â†’ AIå»ºè®® â†’ ä»»åŠ¡é—­ç¯ â†’ ç¤¾åŒºå®ˆæŠ¤"çš„å››é˜¶æ®µå¾ªç¯ï¼Œå¸®åŠ©å­¦ç”Ÿå»ºç«‹å¥åº·çš„å¿ƒç†æ”¯æŒç³»ç»Ÿã€‚

### æŠ€æœ¯æ ˆ

- **å‰ç«¯**: å¾®ä¿¡å°ç¨‹åº (WXML/WXSS/JavaScript)
- **åç«¯**: å¾®ä¿¡äº‘å¼€å‘ (CloudBase)
- **UIæ¡†æ¶**: TDesign Miniprogram
- **AIèƒ½åŠ›**: Dify å·¥ä½œæµ
- **æ•°æ®åº“**: NoSQL (å¾®ä¿¡äº‘æ•°æ®åº“)
- **æ„å»ºå·¥å…·**: å¾®ä¿¡å¼€å‘è€…å·¥å…·ã€npm

### æ ¸å¿ƒåŠŸèƒ½

1. **æƒ…ç»ªå¥åº·é—­ç¯**: æƒ…ç»ªæ‰“å¡ â†’ AIå»ºè®® â†’ ä»»åŠ¡æ‰§è¡Œ â†’ è¡Œä¸ºæ”¹å–„
2. **ç¤¾åŒºå®ˆæŠ¤ç³»ç»Ÿ**: æ ‘æ´å‘å¸– â†’ é£é™©è¯†åˆ« â†’ äº’åŠ©æ”¯æŒ â†’ å±æœºå¹²é¢„
3. **æˆé•¿æ¿€åŠ±ä½“ç³»**: å¾½ç« ç³»ç»Ÿ â†’ å‘¨æŠ¥ç”Ÿæˆ â†’ è¶‹åŠ¿åˆ†æ â†’ æˆé•¿è®°å½•
4. **AIå¯¹è¯ç³»ç»Ÿ**: å¤šAgentå¯¹è¯ â†’ ä¸“ä¸šæ”¯æŒ â†’ ä¸ªæ€§åŒ–å»ºè®®

---

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒæ­å»º

### å‰ç½®è¦æ±‚

#### åŸºç¡€ç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**: Windows 10+ / macOS 10.14+ / Linux
- **Node.js**: 16.0+ (æ¨è 18.x LTS)
- **npm**: 8.0+ æˆ– yarn 1.22+
- **Git**: 2.20+

#### å¼€å‘å·¥å…·
- **å¾®ä¿¡å¼€å‘è€…å·¥å…·**: æœ€æ–°ç¨³å®šç‰ˆ
- **ä»£ç ç¼–è¾‘å™¨**: VS Code (æ¨èæ’ä»¶: å¾®ä¿¡å°ç¨‹åºåŠ©æ‰‹ã€ESLintã€Prettier)
- **è°ƒè¯•å·¥å…·**: Chrome DevTools (å°ç¨‹åºè°ƒè¯•)

### ç¯å¢ƒé…ç½®æ­¥éª¤

#### 1. å®‰è£…å¾®ä¿¡å¼€å‘è€…å·¥å…·

```bash
# ä¸‹è½½åœ°å€
https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html

# é€‰æ‹©å¯¹åº”å¹³å°ç‰ˆæœ¬ä¸‹è½½å®‰è£…
```

#### 2. é…ç½® Node.js ç¯å¢ƒ

```bash
# ä½¿ç”¨ nvm ç®¡ç† Node.js ç‰ˆæœ¬ (æ¨è)
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
nvm install 18
nvm use 18

# æˆ–ç›´æ¥ä»å®˜ç½‘ä¸‹è½½å®‰è£…
# https://nodejs.org/
```

#### 3. å…‹éš†é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®ä»“åº“
git clone https://github.com/your-org/MindGuard.git

# è¿›å…¥é¡¹ç›®ç›®å½•
cd MindGuard

# æŸ¥çœ‹é¡¹ç›®ç»“æ„
ls -la
```

#### 4. å®‰è£…ä¾èµ–

```bash
# è¿›å…¥å°ç¨‹åºç›®å½•
cd miniprogram

# å®‰è£…é¡¹ç›®ä¾èµ–
npm install

# å®‰è£… TDesign ç»„ä»¶åº“
npm install tdesign-miniprogram

# æ„å»ºnpm (åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ“ä½œ)
# å·¥å…· â†’ æ„å»º npm
```

#### 5. é…ç½®äº‘å¼€å‘ç¯å¢ƒ

1. **å¼€é€šäº‘å¼€å‘**
   - åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ç‚¹å‡»"äº‘å¼€å‘"
   - é€‰æ‹©"å¼€é€šäº‘å¼€å‘"
   - åˆ›å»ºæ–°ç¯å¢ƒ (ç¯å¢ƒID: `cloud1-9gpfk3ie94d8630a`)

2. **é…ç½®ç¯å¢ƒå˜é‡**
   ```javascript
   // åœ¨ cloudfunctions ä¸­é…ç½®
   const env = 'cloud1-9gpfk3ie94d8630a';
   ```

3. **åˆ›å»ºæ•°æ®åº“é›†åˆ**
   ```javascript
   // åœ¨äº‘å¼€å‘æ§åˆ¶å°åˆ›å»ºä»¥ä¸‹é›†åˆï¼š
   - users (ç”¨æˆ·ä¿¡æ¯)
   - checkins (æƒ…ç»ªæ‰“å¡)
   - behavior_tasks (ä»»åŠ¡)
   - suggestions (å»ºè®®)
   - forum_posts (ç¤¾åŒºå¸–å­)
   - journals (æ—¥è®°)
   - ask_sessions (AIå¯¹è¯ä¼šè¯)
   ```

### å¼€å‘å·¥å…·é…ç½®

#### VS Code æ’ä»¶æ¨è

```json
{
  "recommendations": [
    "wechat-miniprogram.vscode-wxml",
    "wechat-miniprogram.vscode-wechat",
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-typescript-next",
    "bradlc.vscode-tailwindcss"
  ]
}
```

#### VS Code è®¾ç½®

```json
{
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "emmet.includeLanguages": ["wxml"],
  "files.associations": {
    "*.wxml": "html",
    "*.wxss": "css"
  }
}
```

---

## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

### æ•´ä½“ç»“æ„

```
MindGuard/
â”œâ”€â”€ miniprogram/                # å°ç¨‹åºå‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ pages/                 # é¡µé¢æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ today/            # ä»Šå¤©é¡µé¢
â”‚   â”‚   â”œâ”€â”€ tasks/            # ä»»åŠ¡é¡µé¢
â”‚   â”‚   â”œâ”€â”€ treehole/         # æ ‘æ´é¡µé¢
â”‚   â”‚   â”œâ”€â”€ journal/          # éšç¬”é¡µé¢
â”‚   â”‚   â””â”€â”€ mine/             # æˆ‘çš„é¡µé¢
â”‚   â”œâ”€â”€ packages/             # åˆ†åŒ…
â”‚   â”‚   â”œâ”€â”€ community/        # ç¤¾åŒºåˆ†åŒ…
â”‚   â”‚   â”œâ”€â”€ profile/          # ä¸ªäººèµ„æ–™åˆ†åŒ…
â”‚   â”‚   â”œâ”€â”€ journal/          # æ—¥è®°åˆ†åŒ…
â”‚   â”‚   â”œâ”€â”€ tasks/            # ä»»åŠ¡åˆ†åŒ…
â”‚   â”‚   â”œâ”€â”€ breath/           # å‘¼å¸ç»ƒä¹ 
â”‚   â”‚   â””â”€â”€ mindfulness/      # æ­£å¿µå†¥æƒ³
â”‚   â”œâ”€â”€ independent/          # ç‹¬ç«‹åˆ†åŒ…
â”‚   â”‚   â”œâ”€â”€ sos/              # SOSç´§æ€¥æ±‚åŠ©
â”‚   â”‚   â””â”€â”€ heartchat/        # å¿ƒè¯­ç²¾çµ
â”‚   â”œâ”€â”€ services/             # æœåŠ¡å±‚API
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ components/           # è‡ªå®šä¹‰ç»„ä»¶
â”‚   â”œâ”€â”€ miniprogram_npm/      # npmæ„å»ºäº§ç‰©
â”‚   â”œâ”€â”€ app.js               # å°ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ app.json             # å°ç¨‹åºé…ç½®
â”‚   â””â”€â”€ app.wxss             # å…¨å±€æ ·å¼
â”œâ”€â”€ cloudfunctions/          # äº‘å‡½æ•°
â”‚   â”œâ”€â”€ checkinRecorder/      # æƒ…ç»ªæ‰“å¡
â”‚   â”œâ”€â”€ taskWorkflow/         # ä»»åŠ¡å·¥ä½œæµ
â”‚   â”œâ”€â”€ suggestionOrchestrator/ # å»ºè®®ç¼–æ’
â”‚   â”œâ”€â”€ treeholeModeration/   # æ ‘æ´å®¡æ ¸
â”‚   â”œâ”€â”€ weeklyReport/         # å‘¨æŠ¥ç”Ÿæˆ
â”‚   â”œâ”€â”€ sosRelay/             # SOSä¸­ç»§
â”‚   â””â”€â”€ askMessageManager/    # AIå¯¹è¯ç®¡ç†
â”œâ”€â”€ docs/                     # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ dify/                     # Difyå·¥ä½œæµé…ç½®
â””â”€â”€ README.md                # é¡¹ç›®è¯´æ˜
```

### é¡µé¢ç»“æ„è¯¦è§£

#### ä¸»åŒ…é¡µé¢ (miniprogram/pages/)

```javascript
// é¡µé¢å‘½åè§„èŒƒ
pages/
â”œâ”€â”€ today/                    // ä»Šå¤©Tabé¡µ
â”‚   â”œâ”€â”€ index.js             // é¡µé¢é€»è¾‘
â”‚   â”œâ”€â”€ index.wxml           // é¡µé¢ç»“æ„
â”‚   â”œâ”€â”€ index.wxss           // é¡µé¢æ ·å¼
â”‚   â””â”€â”€ index.json           // é¡µé¢é…ç½®
â”‚
â”œâ”€â”€ tasks/                    // ä»»åŠ¡Tabé¡µ
â”‚   â”œâ”€â”€ index.js
â”‚   â”œâ”€â”€ index.wxml
â”‚   â”œâ”€â”€ index.wxss
â”‚   â””â”€â”€ index.json
â”‚
â”œâ”€â”€ treehole/                 // æ ‘æ´Tabé¡µ
â”œâ”€â”€ journal/                  // éšç¬”Tabé¡µ
â””â”€â”€ mine/                     // æˆ‘çš„Tabé¡µ
```

#### åˆ†åŒ…ç»“æ„

```javascript
packages/
â”œâ”€â”€ community/                // ç¤¾åŒºåˆ†åŒ…
â”‚   â”œâ”€â”€ post-detail/         // å¸–å­è¯¦æƒ…
â”‚   â”œâ”€â”€ post-editor/         // å‘å¸–ç¼–è¾‘
â”‚   â”œâ”€â”€ drafts/              // è‰ç¨¿ç®±
â”‚   â””â”€â”€ ...                  // å…¶ä»–ç¤¾åŒºé¡µé¢
â”‚
â”œâ”€â”€ profile/                 // ä¸ªäººèµ„æ–™åˆ†åŒ…
â”‚   â”œâ”€â”€ report-detail/       // å‘¨æŠ¥è¯¦æƒ…
â”‚   â”œâ”€â”€ badge-detail/        // å¾½ç« è¯¦æƒ…
â”‚   â”œâ”€â”€ resource-map/        // èµ„æºåœ°å›¾
â”‚   â””â”€â”€ ...                  // å…¶ä»–ä¸ªäººèµ„æ–™é¡µé¢
â”‚
â””â”€â”€ ...                       // å…¶ä»–åˆ†åŒ…
```

### æœåŠ¡å±‚ç»“æ„

```javascript
services/
â”œâ”€â”€ auth.js                   // è®¤è¯æœåŠ¡
â”œâ”€â”€ checkins.js               // æƒ…ç»ªæ‰“å¡æœåŠ¡
â”œâ”€â”€ tasks.js                  // ä»»åŠ¡ç®¡ç†æœåŠ¡
â”œâ”€â”€ forum.js                  // ç¤¾åŒºæœåŠ¡
â”œâ”€â”€ journals.js               // æ—¥è®°æœåŠ¡
â”œâ”€â”€ suggestions.js            // å¾®å»ºè®®æœåŠ¡
â”œâ”€â”€ askMessage.js             // AIå¯¹è¯æœåŠ¡
â”œâ”€â”€ reports.js                // å‘¨æŠ¥æœåŠ¡
â””â”€â”€ ...                       // å…¶ä»–æœåŠ¡
```

---

## ğŸ”„ å¼€å‘æµç¨‹

### Git å·¥ä½œæµç¨‹

#### åˆ†æ”¯ç­–ç•¥

```
main                       # ä¸»åˆ†æ”¯ï¼Œç”Ÿäº§ç¯å¢ƒä»£ç 
â”œâ”€â”€ develop                # å¼€å‘åˆ†æ”¯ï¼Œé›†æˆæµ‹è¯•
â”œâ”€â”€ feature/xxx           # åŠŸèƒ½åˆ†æ”¯
â”œâ”€â”€ bugfix/xxx            # ä¿®å¤åˆ†æ”¯
â”œâ”€â”€ release/vx.x.x        # å‘å¸ƒåˆ†æ”¯
â””â”€â”€ hotfix/xxx            # ç´§æ€¥ä¿®å¤åˆ†æ”¯
```

#### å¼€å‘æµç¨‹

1. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/new-feature
   ```

2. **å¼€å‘å’Œæµ‹è¯•**
   ```bash
   # è¿›è¡Œå¼€å‘
   # ç¼–å†™æµ‹è¯•
   # è¿è¡Œæµ‹è¯•
   npm test
   ```

3. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½æè¿°"
   ```

4. **æ¨é€åˆ†æ”¯**
   ```bash
   git push origin feature/new-feature
   ```

5. **åˆ›å»º Pull Request**
   - åœ¨ GitHub/GitLab åˆ›å»º PR
   - è¯·æ±‚ä»£ç å®¡æŸ¥
   - åˆå¹¶åˆ° develop åˆ†æ”¯

### ä»£ç å¼€å‘æµç¨‹

#### 1. éœ€æ±‚åˆ†æ

```markdown
## éœ€æ±‚æè¿°
- åŠŸèƒ½èƒŒæ™¯
- ç”¨æˆ·åœºæ™¯
- æŠ€æœ¯è¦æ±‚

## æŠ€æœ¯æ–¹æ¡ˆ
- å‰ç«¯å®ç°æ–¹æ¡ˆ
- åç«¯APIè®¾è®¡
- æ•°æ®åº“è®¾è®¡
- ç¬¬ä¸‰æ–¹é›†æˆ

## å¼€å‘è®¡åˆ’
- å‰ç«¯å¼€å‘ä»»åŠ¡
- åç«¯å¼€å‘ä»»åŠ¡
- æµ‹è¯•è®¡åˆ’
- ä¸Šçº¿è®¡åˆ’
```

#### 2. è®¾è®¡é˜¶æ®µ

- **UIè®¾è®¡**: ä½¿ç”¨ Figma/Sketch è®¾è®¡ç•Œé¢
- **APIè®¾è®¡**: å®šä¹‰æ¥å£è§„èŒƒ
- **æ•°æ®åº“è®¾è®¡**: è®¾è®¡è¡¨ç»“æ„å’Œç´¢å¼•
- **æ¶æ„è®¾è®¡**: è®¾è®¡æ¨¡å—é—´äº¤äº’

#### 3. å¼€å‘é˜¶æ®µ

```javascript
// 1. é¡µé¢å¼€å‘
// åˆ›å»ºé¡µé¢æ–‡ä»¶
// å®ç°é¡µé¢é€»è¾‘
// æ·»åŠ æ ·å¼

// 2. æœåŠ¡å±‚å¼€å‘
// åˆ›å»ºæœåŠ¡æ–‡ä»¶
// å®ç°APIè°ƒç”¨
// æ·»åŠ é”™è¯¯å¤„ç†

// 3. äº‘å‡½æ•°å¼€å‘
// åˆ›å»ºäº‘å‡½æ•°
// å®ç°ä¸šåŠ¡é€»è¾‘
// æ·»åŠ æ•°æ®éªŒè¯
```

#### 4. æµ‹è¯•é˜¶æ®µ

- **å•å…ƒæµ‹è¯•**: æµ‹è¯•å‡½æ•°å’Œç»„ä»¶
- **é›†æˆæµ‹è¯•**: æµ‹è¯•æ¨¡å—é—´äº¤äº’
- **ç«¯åˆ°ç«¯æµ‹è¯•**: æµ‹è¯•å®Œæ•´ç”¨æˆ·æµç¨‹
- **æ€§èƒ½æµ‹è¯•**: æµ‹è¯•å“åº”æ—¶é—´å’Œå¹¶å‘

### Mock æ•°æ®å¼€å‘

#### Mock æ•°æ®è§„èŒƒ

```javascript
// services/exampleService.js
const MOCK_EXAMPLE_DATA = [
  {
    id: 'example_001',
    title: 'ç¤ºä¾‹æ•°æ®1',
    status: 'active',
    createdAt: '2024-10-20T10:00:00Z'
  },
  {
    id: 'example_002',
    title: 'ç¤ºä¾‹æ•°æ®2',
    status: 'pending',
    createdAt: '2024-10-20T11:00:00Z'
  }
];

// Mock æ•°æ®éªŒè¯å‡½æ•°
function validateMockData(data) {
  // éªŒè¯Mockæ•°æ®æ ¼å¼
  return data.every(item =>
    item.id &&
    item.title &&
    ['active', 'pending'].includes(item.status)
  );
}
```

#### Mock å¼€å‘æµç¨‹

1. **å®šä¹‰æ•°æ®ç»“æ„**
2. **åˆ›å»ºMockæ•°æ®**
3. **å®ç°Mock API**
4. **ç¼–å†™æµ‹è¯•ç”¨ä¾‹**
5. **éªŒè¯æ•°æ®ä¸€è‡´æ€§**

---

## ğŸ“ ä»£ç è§„èŒƒ

### JavaScript è§„èŒƒ

#### åŸºç¡€è§„èŒƒ

```javascript
// 1. ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼
'use strict';

// 2. ä¼˜å…ˆä½¿ç”¨ const/let
const constant = 'å¸¸é‡';
let variable = 'å˜é‡';

// 3. å‡½æ•°å£°æ˜
function functionName(param1, param2) {
  // å‡½æ•°ä½“
  return result;
}

// 4. ç®­å¤´å‡½æ•°
const arrowFunction = (param) => {
  return param * 2;
};

// 5. æ¨¡æ¿å­—ç¬¦ä¸²
const message = `Hello ${name}`;

// 6. è§£æ„èµ‹å€¼
const { id, title } = data;
const [first, second] = array;
```

#### å‘½åè§„èŒƒ

```javascript
// å˜é‡å’Œå‡½æ•°: camelCase
const userName = 'john';
const getUserInfo = () => {};

// å¸¸é‡: UPPER_SNAKE_CASE
const API_BASE_URL = 'https://api.example.com';
const MAX_RETRY_COUNT = 3;

// ç±»å: PascalCase
class UserService {
  constructor() {}
}

// æ–‡ä»¶å: kebab-case
// user-service.js
// checkin-recorder.js
```

#### å‡½æ•°è§„èŒƒ

```javascript
/**
 * å‡½æ•°æè¿°
 *
 * @param {string} param1 - å‚æ•°1æè¿°
 * @param {number} param2 - å‚æ•°2æè¿°
 * @returns {Object} è¿”å›å€¼æè¿°
 * @throws {Error} é”™è¯¯æƒ…å†µæè¿°
 */
async function processData(param1, param2) {
  try {
    // å‚æ•°éªŒè¯
    if (!param1) {
      throw new Error('param1 is required');
    }

    // ä¸šåŠ¡é€»è¾‘
    const result = await someAsyncOperation(param1, param2);

    // è¿”å›ç»“æœ
    return {
      success: true,
      data: result
    };
  } catch (error) {
    console.error('Process data error:', error);
    throw error;
  }
}
```

### CSS è§„èŒƒ

#### å‘½åè§„èŒƒ

```css
/* BEM å‘½åè§„èŒƒ */
.block {
  /* å— */
}

.block__element {
  /* å…ƒç´  */
}

.block--modifier {
  /* ä¿®é¥°ç¬¦ */
}

.block__element--modifier {
  /* å…ƒç´ ä¿®é¥°ç¬¦ */
}

/* ç¤ºä¾‹ */
.task-card {
  padding: 16px;
}

.task-card__title {
  font-size: 16px;
  font-weight: bold;
}

.task-card__title--completed {
  color: #67C23A;
}
```

#### æ ·å¼ç»„ç»‡

```css
/* 1. å˜é‡å®šä¹‰ */
:root {
  --primary-color: #3A7BD5;
  --success-color: #67C23A;
  --warning-color: #E6A23C;
  --danger-color: #F56C6C;
  --text-color: #333333;
  --border-color: #DCDFE6;
}

/* 2. åŸºç¡€æ ·å¼ */
* {
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  line-height: 1.5;
  color: var(--text-color);
}

/* 3. ç»„ä»¶æ ·å¼ */
.component {
  /* ç»„ä»¶æ ·å¼ */
}

/* 4. å·¥å…·ç±» */
.text-center { text-align: center; }
.flex { display: flex; }
.flex-1 { flex: 1; }
```

### æ–‡ä»¶ç»„ç»‡è§„èŒƒ

#### é¡µé¢æ–‡ä»¶ç»“æ„

```
pages/example/
â”œâ”€â”€ index.js              // é¡µé¢é€»è¾‘
â”œâ”€â”€ index.json            // é¡µé¢é…ç½®
â”œâ”€â”€ index.wxml            // é¡µé¢ç»“æ„
â”œâ”€â”€ index.wxss            // é¡µé¢æ ·å¼
â””â”€â”€ components/           // é¡µé¢ç»„ä»¶
    â”œâ”€â”€ component-a.js
    â”œâ”€â”€ component-a.wxml
    â”œâ”€â”€ component-a.wxss
    â””â”€â”€ component-a.json
```

#### ç»„ä»¶æ–‡ä»¶ç»“æ„

```
components/example-component/
â”œâ”€â”€ index.js              // ç»„ä»¶é€»è¾‘
â”œâ”€â”€ index.json            // ç»„ä»¶é…ç½®
â”œâ”€â”€ index.wxml            // ç»„ä»¶ç»“æ„
â”œâ”€â”€ index.wxss            // ç»„ä»¶æ ·å¼
â””â”€â”€ README.md             // ç»„ä»¶è¯´æ˜
```

### æ³¨é‡Šè§„èŒƒ

#### JSDoc æ³¨é‡Š

```javascript
/**
 * ç”¨æˆ·æœåŠ¡ç±»
 *
 * æä¾›ç”¨æˆ·ç›¸å…³çš„æ“ä½œæ–¹æ³•ï¼ŒåŒ…æ‹¬ç™»å½•ã€æ³¨å†Œã€ä¿¡æ¯è·å–ç­‰
 *
 * @class UserService
 * @version 1.0.0
 * @since 2024-10-20
 * @author MindGuard Team
 */
class UserService {
  /**
   * ç”¨æˆ·ç™»å½•
   *
   * @param {string} username - ç”¨æˆ·å
   * @param {string} password - å¯†ç 
   * @returns {Promise<Object>} ç™»å½•ç»“æœ
   * @throws {AuthenticationError} è®¤è¯å¤±è´¥æ—¶æŠ›å‡º
   *
   * @example
   * // ä½¿ç”¨ç¤ºä¾‹
   * const userService = new UserService();
   * const result = await userService.login('user123', 'password123');
   * console.log(result.token);
   */
  async login(username, password) {
    // å®ç°ç™»å½•é€»è¾‘
  }
}
```

#### è¡Œå†…æ³¨é‡Š

```javascript
// æ•°æ®éªŒè¯ - ç¡®ä¿ç”¨æˆ·è¾“å…¥çš„æ•°æ®æ ¼å¼æ­£ç¡®
if (!email || !email.includes('@')) {
  throw new Error('Invalid email format');
}

// TODO: ä¼˜åŒ–æ€§èƒ½ - ä½¿ç”¨ç¼“å­˜å‡å°‘æ•°æ®åº“æŸ¥è¯¢
const userData = await getUserFromDatabase(userId);

// FIXME: ä¿®å¤è¾¹ç•Œæƒ…å†µ - å¤„ç†ç©ºæ•°ç»„çš„æƒ…å†µ
if (!Array.isArray(items) || items.length === 0) {
  return [];
}
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### æµ‹è¯•ç­–ç•¥

#### æµ‹è¯•é‡‘å­—å¡”

```
    /\
   /  \
  /E2E \     <- ç«¯åˆ°ç«¯æµ‹è¯• (å°‘é‡)
 /______\
/        \
/Integration\ <- é›†æˆæµ‹è¯• (é€‚é‡)
/__________\
/            \
/  Unit Tests  \ <- å•å…ƒæµ‹è¯• (å¤§é‡)
/______________\
```

#### æµ‹è¯•åˆ†ç±»

1. **å•å…ƒæµ‹è¯•**: æµ‹è¯•ç‹¬ç«‹çš„å‡½æ•°å’Œç»„ä»¶
2. **é›†æˆæµ‹è¯•**: æµ‹è¯•æ¨¡å—é—´çš„äº¤äº’
3. **ç«¯åˆ°ç«¯æµ‹è¯•**: æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹
4. **æ€§èƒ½æµ‹è¯•**: æµ‹è¯•ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡

### å•å…ƒæµ‹è¯•

#### Jest é…ç½®

```javascript
// jest.config.js
module.exports = {
  testEnvironment: 'node',
  collectCoverage: true,
  coverageDirectory: 'coverage',
  coverageReporters: ['text', 'lcov', 'html'],
  testMatch: [
    '**/__tests__/**/*.test.js',
    '**/?(*.)+(spec|test).js'
  ],
  collectCoverageFrom: [
    'services/**/*.js',
    'utils/**/*.js',
    'cloudfunctions/**/*.js',
    '!**/node_modules/**',
    '!**/coverage/**'
  ]
};
```

#### æµ‹è¯•ç¤ºä¾‹

```javascript
// services/__tests__/checkins.test.js
const { getTodayCheckin, createCheckin } = require('../checkins');

describe('Checkins Service', () => {
  beforeEach(() => {
    // æµ‹è¯•å‰å‡†å¤‡
    wx.setStorageSync('USE_MOCK', true);
  });

  describe('getTodayCheckin', () => {
    test('åº”è¯¥è¿”å›ä»Šæ—¥æ‰“å¡æ•°æ®', async () => {
      const result = await getTodayCheckin();

      expect(result).toBeDefined();
      expect(result.hasCheckedIn).toBeDefined();
      expect(typeof result.mood).toBe('string');
    });

    test('æœªæ‰“å¡æ—¶åº”è¯¥è¿”å›é»˜è®¤å€¼', async () => {
      // Mock æ— æ‰“å¡æ•°æ®çš„æƒ…å†µ
      const result = await getTodayCheckin();

      expect(result.hasCheckedIn).toBe(false);
      expect(result.mood).toBe('');
    });
  });

  describe('createCheckin', () => {
    test('åº”è¯¥æˆåŠŸåˆ›å»ºæ‰“å¡è®°å½•', async () => {
      const data = {
        mood: 'calm',
        intensity: 4,
        note: 'ä»Šå¤©å¿ƒæƒ…ä¸é”™'
      };

      const result = await createCheckin(data);

      expect(result.id).toBeDefined();
      expect(result.mood).toBe('calm');
      expect(result.intensity).toBe(4);
    });

    test('åº”è¯¥éªŒè¯å¿…éœ€å­—æ®µ', async () => {
      const invalidData = {
        // ç¼ºå°‘ mood å­—æ®µ
        intensity: 4
      };

      await expect(createCheckin(invalidData))
        .rejects.toThrow('mood is required');
    });
  });
});
```

### é›†æˆæµ‹è¯•

#### API é›†æˆæµ‹è¯•

```javascript
// tests/integration/api.test.js
const request = require('supertest');
const app = require('../../app');

describe('API Integration Tests', () => {
  test('POST /api/checkins åº”è¯¥åˆ›å»ºæ‰“å¡è®°å½•', async () => {
    const response = await request(app)
      .post('/api/checkins')
      .send({
        mood: 'calm',
        intensity: 4
      })
      .expect(201);

    expect(response.body.success).toBe(true);
    expect(response.body.data.id).toBeDefined();
  });

  test('GET /api/checkins/today åº”è¯¥è¿”å›ä»Šæ—¥æ‰“å¡', async () => {
    const response = await request(app)
      .get('/api/checkins/today')
      .expect(200);

    expect(response.body.success).toBe(true);
    expect(Array.isArray(response.body.data)).toBe(true);
  });
});
```

### äº‘å‡½æ•°æµ‹è¯•

```javascript
// cloudfunctions/__tests__/checkinRecorder.test.js
const cloud = require('wx-server-sdk');
const { main } = require('../checkinRecorder/index');

// Mock äº‘å¼€å‘ç¯å¢ƒ
jest.mock('wx-server-sdk', () => ({
  init: jest.fn(),
  getWXContext: jest.fn(() => ({
    OPENID: 'test-openid'
  })),
  database: jest.fn(() => ({
    collection: jest.fn(() => ({
      where: jest.fn().mockReturnThis(),
      get: jest.fn(),
      add: jest.fn(),
      update: jest.fn()
    }))
  }))
}));

describe('CheckinRecorder Cloud Function', () => {
  test('getToday action åº”è¯¥è¿”å›ä»Šæ—¥æ‰“å¡', async () => {
    const event = {
      action: 'getToday'
    };

    const result = await main(event, {});

    expect(result.ok).toBe(true);
    expect(result.data).toBeDefined();
  });

  test('create action åº”è¯¥åˆ›å»ºæ–°æ‰“å¡', async () => {
    const event = {
      action: 'create',
      mood: 'calm',
      intensity: 4
    };

    const result = await main(event, {});

    expect(result.ok).toBe(true);
    expect(result.data.id).toBeDefined();
  });
});
```

### ç«¯åˆ°ç«¯æµ‹è¯•

#### å¾®ä¿¡å°ç¨‹åºæµ‹è¯•

```javascript
// tests/e2e/miniprogram.test.js
const { driver } = require('@wdio/allure-reporter');

describe('MindGuard å°ç¨‹åºç«¯åˆ°ç«¯æµ‹è¯•', () => {
  before(async () => {
    // å¯åŠ¨å°ç¨‹åº
    await driver.launchApp();
  });

  test('ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿå®Œæˆæƒ…ç»ªæ‰“å¡æµç¨‹', async () => {
    // 1. è¿›å…¥ä»Šå¤©é¡µé¢
    await driver.element('today-tab').click();

    // 2. ç‚¹å‡»æ‰“å¡æŒ‰é’®
    await driver.element('checkin-button').click();

    // 3. é€‰æ‹©æƒ…ç»ª
    await driver.element('emotion-calm').click();

    // 4. è°ƒæ•´å¼ºåº¦
    await driver.element('intensity-slider').setValue(4);

    // 5. æ·»åŠ å¤‡æ³¨
    await driver.element('note-input').setValue('ä»Šå¤©å¿ƒæƒ…ä¸é”™');

    // 6. æäº¤æ‰“å¡
    await driver.element('submit-button').click();

    // 7. éªŒè¯ç»“æœ
    const successMessage = await driver.element('success-message').getText();
    expect(successMessage).toContain('æ‰“å¡æˆåŠŸ');
  });
});
```

### æ€§èƒ½æµ‹è¯•

#### å‰ç«¯æ€§èƒ½æµ‹è¯•

```javascript
// tests/performance/load-time.test.js
const { performance } = require('perf_hooks');

describe('æ€§èƒ½æµ‹è¯•', () => {
  test('é¡µé¢åŠ è½½æ—¶é—´åº”è¯¥å°äº2ç§’', async () => {
    const startTime = performance.now();

    // æ¨¡æ‹Ÿé¡µé¢åŠ è½½
    await loadPage('today');

    const endTime = performance.now();
    const loadTime = endTime - startTime;

    expect(loadTime).toBeLessThan(2000);
  });

  test('APIå“åº”æ—¶é—´åº”è¯¥å°äº500ms', async () => {
    const startTime = performance.now();

    const response = await api.getTodayCheckin();

    const endTime = performance.now();
    const responseTime = endTime - startTime;

    expect(responseTime).toBeLessThan(500);
  });
});
```

---

## ğŸš€ éƒ¨ç½²æµç¨‹

### å¼€å‘ç¯å¢ƒéƒ¨ç½²

#### 1. æœ¬åœ°å¼€å‘

```bash
# å¯åŠ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·
# å¯¼å…¥é¡¹ç›®
# é…ç½®äº‘å¼€å‘ç¯å¢ƒ
# æœ¬åœ°è°ƒè¯•
```

#### 2. ä»£ç æäº¤

```bash
# æäº¤ä»£ç 
git add .
git commit -m "feat: æ–°åŠŸèƒ½æè¿°"
git push origin feature/new-feature

# åˆ›å»º PR
# ä»£ç å®¡æŸ¥
# åˆå¹¶åˆ° develop
```

### æµ‹è¯•ç¯å¢ƒéƒ¨ç½²

#### 1. äº‘å‡½æ•°éƒ¨ç½²

```bash
# éƒ¨ç½²å•ä¸ªäº‘å‡½æ•°
# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­å³é”®äº‘å‡½æ•°ç›®å½•
# é€‰æ‹©"ä¸Šä¼ å¹¶éƒ¨ç½²ï¼šäº‘ç«¯å®‰è£…ä¾èµ–"

# æ‰¹é‡éƒ¨ç½²
# ä½¿ç”¨è„šæœ¬æ‰¹é‡éƒ¨ç½²
npm run deploy:cloudfunctions
```

#### 2. å°ç¨‹åºéƒ¨ç½²

```bash
# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­
# ç‚¹å‡»"ä¸Šä¼ "æŒ‰é’®
# å¡«å†™ç‰ˆæœ¬å·å’Œé¡¹ç›®å¤‡æ³¨
# ä¸Šä¼ ä»£ç åŒ…

# æäº¤å®¡æ ¸
# ç­‰å¾…å®¡æ ¸é€šè¿‡
```

### ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

#### 1. é¢„å‘å¸ƒæ£€æŸ¥

```bash
# è¿è¡Œæµ‹è¯•å¥—ä»¶
npm run test:all

# ä»£ç è´¨é‡æ£€æŸ¥
npm run lint
npm run type-check

# å®‰å…¨æ‰«æ
npm run security:scan
```

#### 2. ç”Ÿäº§éƒ¨ç½²

```bash
# åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout -b release/v1.0.0

# åˆå¹¶æœ€æ–°ä»£ç 
git merge develop

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
npm run deploy:production

# æ ‡è®°ç‰ˆæœ¬
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0
```

#### 3. éƒ¨ç½²éªŒè¯

```bash
# å¥åº·æ£€æŸ¥
curl -f https://api.example.com/health

# åŠŸèƒ½éªŒè¯
npm run test:e2e:production

# æ€§èƒ½ç›‘æ§
npm run monitor:performance
```

### CI/CD æµç¨‹

#### GitHub Actions é…ç½®

```yaml
# .github/workflows/deploy.yml
name: Deploy to Production

on:
  push:
    tags:
      - 'v*'

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm ci

      - name: Run tests
        run: npm test

      - name: Run linting
        run: npm run lint

      - name: Run security audit
        run: npm audit --audit-level high

  deploy:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Deploy to WeChat Cloud
        run: |
          # éƒ¨ç½²è„šæœ¬
          npm run deploy:production

      - name: Notify deployment
        run: |
          # å‘é€éƒ¨ç½²é€šçŸ¥
          curl -X POST "$NOTIFICATION_URL" \
            -H "Content-Type: application/json" \
            -d '{"text": "MindGuard v${{ github.ref_name }} deployed successfully"}'
```

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### å‚ä¸è´¡çŒ®

#### è´¡çŒ®æ–¹å¼

1. **ä»£ç è´¡çŒ®**: æäº¤ Pull Request
2. **æ–‡æ¡£è´¡çŒ®**: æ”¹è¿›æ–‡æ¡£å’Œæ•™ç¨‹
3. **Bug æŠ¥å‘Š**: æŠ¥å‘Šé—®é¢˜å¹¶ååŠ©ä¿®å¤
4. **åŠŸèƒ½å»ºè®®**: æå‡ºæ–°åŠŸèƒ½å»ºè®®
5. **æµ‹è¯•åé¦ˆ**: å‚ä¸æµ‹è¯•å¹¶æä¾›åé¦ˆ

#### è´¡çŒ®æµç¨‹

1. **Fork é¡¹ç›®**
   ```bash
   # Fork é¡¹ç›®åˆ°ä½ çš„ GitHub è´¦æˆ·
   # å…‹ä½ çš„ Fork
   git clone https://github.com/your-username/MindGuard.git
   ```

2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**
   ```bash
   git checkout -b feature/your-feature-name
   ```

3. **å¼€å‘å’Œæµ‹è¯•**
   ```bash
   # ç¼–å†™ä»£ç 
   # æ·»åŠ æµ‹è¯•
   # ç¡®ä¿æµ‹è¯•é€šè¿‡
   npm test
   ```

4. **æäº¤ä»£ç **
   ```bash
   git add .
   git commit -m "feat: æ·»åŠ åŠŸèƒ½æè¿°"
   ```

5. **æ¨é€å’Œ PR**
   ```bash
   git push origin feature/your-feature-name
   # åœ¨ GitHub ä¸Šåˆ›å»º Pull Request
   ```

### ä»£ç å®¡æŸ¥æ ‡å‡†

#### å®¡æŸ¥æ¸…å•

- [ ] ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒ
- [ ] åŒ…å«å¿…è¦çš„æµ‹è¯•
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] æ²¡æœ‰å®‰å…¨æ¼æ´
- [ ] æ€§èƒ½å½±å“å¯æ¥å—
- [ ] å…¼å®¹ç°æœ‰åŠŸèƒ½

#### å®¡æŸ¥æµç¨‹

1. **è‡ªæˆ‘å®¡æŸ¥**
   - ä»£ç ç¬¦åˆè§„èŒƒ
   - åŠŸèƒ½å®Œæ•´å®ç°
   - æµ‹è¯•è¦†ç›–å……åˆ†

2. **åŒè¡Œå®¡æŸ¥**
   - è‡³å°‘ä¸€äººå®¡æŸ¥
   - å…³æ³¨ä»£ç è´¨é‡
   - éªŒè¯åŠŸèƒ½æ­£ç¡®æ€§

3. **ç»´æŠ¤è€…å®¡æŸ¥**
   - æ•´ä½“æ¶æ„å½±å“
   - é•¿æœŸç»´æŠ¤è€ƒè™‘
   - æœ€ç»ˆåˆå¹¶å†³å®š

### æ–‡æ¡£è´¡çŒ®

#### æ–‡æ¡£ç±»å‹

1. **API æ–‡æ¡£**: æ¥å£è¯´æ˜å’Œç¤ºä¾‹
2. **ç”¨æˆ·æŒ‡å—**: åŠŸèƒ½ä½¿ç”¨è¯´æ˜
3. **å¼€å‘æŒ‡å—**: å¼€å‘ç¯å¢ƒæ­å»º
4. **æ¶æ„æ–‡æ¡£**: ç³»ç»Ÿè®¾è®¡è¯´æ˜
5. **éƒ¨ç½²æ–‡æ¡£**: éƒ¨ç½²æµç¨‹è¯´æ˜

#### æ–‡æ¡£è§„èŒƒ

```markdown
# æ–‡æ¡£æ ‡é¢˜

> ç®€çŸ­æè¿°

## æ¦‚è¿°
èƒŒæ™¯ä¿¡æ¯å’Œæ€»ä½“ä»‹ç»

## å®‰è£…/ä½¿ç”¨
è¯¦ç»†çš„æ­¥éª¤è¯´æ˜

## ç¤ºä¾‹
ä»£ç ç¤ºä¾‹å’Œä½¿ç”¨æ¡ˆä¾‹

## API å‚è€ƒ
è¯¦ç»†çš„ API è¯´æ˜

## å¸¸è§é—®é¢˜
FAQ å’Œæ•…éšœæ’é™¤

## è´¡çŒ®
å¦‚ä½•è´¡çŒ®å’Œæ”¹è¿›
```

### Issue æ¨¡æ¿

#### Bug æŠ¥å‘Šæ¨¡æ¿

```markdown
## Bug æè¿°
ç®€è¦æè¿° bug

## å¤ç°æ­¥éª¤
1. æ‰“å¼€é¡µé¢
2. ç‚¹å‡»æŒ‰é’®
3. è§‚å¯Ÿç»“æœ

## æœŸæœ›ç»“æœ
æè¿°åº”è¯¥å‘ç”Ÿä»€ä¹ˆ

## å®é™…ç»“æœ
æè¿°å®é™…å‘ç”Ÿäº†ä»€ä¹ˆ

## ç¯å¢ƒä¿¡æ¯
- æ“ä½œç³»ç»Ÿ:
- å¾®ä¿¡ç‰ˆæœ¬:
- å°ç¨‹åºç‰ˆæœ¬:

## é™„åŠ ä¿¡æ¯
æˆªå›¾ã€æ—¥å¿—ç­‰
```

#### åŠŸèƒ½è¯·æ±‚æ¨¡æ¿

```markdown
## åŠŸèƒ½æè¿°
æè¿°å¸Œæœ›æ·»åŠ çš„åŠŸèƒ½

## é—®é¢˜èƒŒæ™¯
è¯´æ˜ä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªåŠŸèƒ½

## è§£å†³æ–¹æ¡ˆ
æè¿°ä½ å¸Œæœ›çš„è§£å†³æ–¹æ¡ˆ

## æ›¿ä»£æ–¹æ¡ˆ
æè¿°ä½ è€ƒè™‘è¿‡çš„å…¶ä»–è§£å†³æ–¹æ¡ˆ

## é™„åŠ ä¿¡æ¯
ä»»ä½•å…¶ä»–ç›¸å…³ä¿¡æ¯
```

---

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### å¼€å‘ç¯å¢ƒé—®é¢˜

**Q: å¾®ä¿¡å¼€å‘è€…å·¥å…·æ— æ³•è¯†åˆ«é¡¹ç›®**
```bash
# è§£å†³æ–¹æ¡ˆ
1. ç¡®ä¿ project.config.json å­˜åœ¨
2. æ£€æŸ¥ appid é…ç½®æ˜¯å¦æ­£ç¡®
3. é‡æ–°å¯¼å…¥é¡¹ç›®
```

**Q: npm install å¤±è´¥**
```bash
# è§£å†³æ–¹æ¡ˆ
1. æ¸…é™¤ npm ç¼“å­˜: npm cache clean --force
2. åˆ é™¤ node_modules å’Œ package-lock.json
3. é‡æ–°å®‰è£…: npm install
4. æ£€æŸ¥ç½‘ç»œè¿æ¥
```

**Q: äº‘å‡½æ•°è°ƒç”¨å¤±è´¥**
```javascript
// æ£€æŸ¥æ¸…å•
1. äº‘å¼€å‘ç¯å¢ƒæ˜¯å¦å·²å¼€é€š
2. ç¯å¢ƒIDæ˜¯å¦æ­£ç¡®
3. äº‘å‡½æ•°æ˜¯å¦å·²éƒ¨ç½²
4. æƒé™é…ç½®æ˜¯å¦æ­£ç¡®
```

#### è¿è¡Œæ—¶é—®é¢˜

**Q: é¡µé¢ç™½å±**
```javascript
// æ’æŸ¥æ­¥éª¤
1. æ£€æŸ¥æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤é¡µé¢è·¯å¾„é…ç½®æ­£ç¡®
3. æ£€æŸ¥ç»„ä»¶å¼•ç”¨æ˜¯å¦æ­£ç¡®
4. éªŒè¯æ•°æ®åŠ è½½æ˜¯å¦æˆåŠŸ
```

**Q: API è°ƒç”¨å¤±è´¥**
```javascript
// è°ƒè¯•æ­¥éª¤
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯ API åœ°å€æ­£ç¡®
3. æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼
4. æŸ¥çœ‹ CloudBase æ§åˆ¶å°æ—¥å¿—
```

**Q: äº‘å‡½æ•°è¶…æ—¶**
```javascript
// è§£å†³æ–¹æ¡ˆ
1. æ£€æŸ¥äº‘å‡½æ•°æ‰§è¡Œæ—¶é—´
2. ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
3. å¢åŠ è¶…æ—¶æ—¶é—´é…ç½®
4. è€ƒè™‘å¼‚æ­¥å¤„ç†
```

### è°ƒè¯•æŠ€å·§

#### å‰ç«¯è°ƒè¯•

```javascript
// 1. ä½¿ç”¨ console.log è°ƒè¯•
console.log('Debug info:', data);

// 2. ä½¿ç”¨ debugger æ–­ç‚¹
debugger;

// 3. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·è°ƒè¯•
// - Network é¢æ¿æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
// - Console é¢æ¿æŸ¥çœ‹æ—¥å¿—
// - Sources é¢æ¿è®¾ç½®æ–­ç‚¹

// 4. ä½¿ç”¨ vConsole (ç§»åŠ¨ç«¯è°ƒè¯•)
import vconsole from 'vconsole';
new vconsole();
```

#### äº‘å‡½æ•°è°ƒè¯•

```javascript
// 1. æ·»åŠ è¯¦ç»†æ—¥å¿—
exports.main = async (event, context) => {
  console.log('Input:', event);
  console.log('Context:', context);

  try {
    // ä¸šåŠ¡é€»è¾‘
    const result = await processEvent(event);
    console.log('Result:', result);

    return { ok: true, data: result };
  } catch (error) {
    console.error('Error:', error);
    return { ok: false, error: error.message };
  }
};

// 2. æœ¬åœ°è°ƒè¯•
// ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„äº‘å‡½æ•°æœ¬åœ°è°ƒè¯•åŠŸèƒ½

// 3. è¿œç¨‹è°ƒè¯•
// åœ¨ CloudBase æ§åˆ¶å°æŸ¥çœ‹æ—¥å¿—
```

#### æ•°æ®åº“è°ƒè¯•

```javascript
// 1. æŸ¥è¯¢æ•°æ®
const result = await db.collection('collection')
  .where({
    _openid: openid,
    status: 'active'
  })
  .get();

console.log('Query result:', result);

// 2. æ£€æŸ¥æ•°æ®æ ¼å¼
result.data.forEach(item => {
  console.log('Item:', item);
  console.log('Item fields:', Object.keys(item));
});

// 3. èšåˆæŸ¥è¯¢è°ƒè¯•
const aggregateResult = await db.collection('collection')
  .aggregate()
  .match({
    created_at: db.command.gte('2024-01-01')
  })
  .group({
    _id: '$category',
    count: db.command.sum(1)
  })
  .end();

console.log('Aggregate result:', aggregateResult);
```

### æ€§èƒ½ä¼˜åŒ–

#### å‰ç«¯ä¼˜åŒ–

```javascript
// 1. ç»„ä»¶æ‡’åŠ è½½
const lazyLoad = () => {
  // åŠ¨æ€åŠ è½½ç»„ä»¶
};

// 2. æ•°æ®ç¼“å­˜
const cache = new Map();

function getCachedData(key) {
  if (cache.has(key)) {
    return cache.get(key);
  }

  const data = fetchData(key);
  cache.set(key, data);
  return data;
}

// 3. é˜²æŠ–å’ŒèŠ‚æµ
function debounce(func, wait) {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
}

function throttle(func, limit) {
  let inThrottle;
  return function() {
    const args = arguments;
    const context = this;
    if (!inThrottle) {
      func.apply(context, args);
      inThrottle = true;
      setTimeout(() => inThrottle = false, limit);
    }
  };
}
```

#### äº‘å‡½æ•°ä¼˜åŒ–

```javascript
// 1. æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
async function getOptimizedData(openid) {
  // ä½¿ç”¨ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
  const result = await db.collection('collection')
    .where({
      _openid: openid,
      status: 'active'  // æ·»åŠ ç´¢å¼•å­—æ®µ
    })
    .field({  // åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µ
      id: true,
      title: true,
      status: true
    })
    .limit(20)  // é™åˆ¶è¿”å›æ•°é‡
    .get();

  return result;
}

// 2. æ‰¹é‡æ“ä½œ
async function batchUpdate(updates) {
  const batch = db.collection('collection').batch();

  updates.forEach(item => {
    batch.doc(item.id).update({
      data: item.data
    });
  });

  return await batch.commit();
}

// 3. å¼‚æ­¥å¤„ç†
async function processDataAsync(data) {
  // ç«‹å³è¿”å›ä»»åŠ¡ID
  const taskId = generateTaskId();

  // å¼‚æ­¥å¤„ç†
  processTask(taskId, data).catch(console.error);

  return { taskId };
}
```

---

## ğŸ”® æ‰©å±•å¼€å‘

### æ·»åŠ æ–°åŠŸèƒ½

#### åŠŸèƒ½å¼€å‘æµç¨‹

1. **éœ€æ±‚åˆ†æ**
   ```markdown
   ## åŠŸèƒ½éœ€æ±‚
   - åŠŸèƒ½æè¿°
   - ç”¨æˆ·æ•…äº‹
   - éªŒæ”¶æ ‡å‡†

   ## æŠ€æœ¯æ–¹æ¡ˆ
   - å‰ç«¯å®ç°
   - åç«¯API
   - æ•°æ®åº“è®¾è®¡
   ```

2. **è®¾è®¡é˜¶æ®µ**
   - UI/UX è®¾è®¡
   - API æ¥å£è®¾è®¡
   - æ•°æ®æ¨¡å‹è®¾è®¡
   - æŠ€æœ¯æ¶æ„è®¾è®¡

3. **å¼€å‘é˜¶æ®µ**
   - å‰ç«¯é¡µé¢å¼€å‘
   - åç«¯APIå¼€å‘
   - äº‘å‡½æ•°å¼€å‘
   - æ•°æ®åº“åˆ›å»º

4. **æµ‹è¯•é˜¶æ®µ**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - ç«¯åˆ°ç«¯æµ‹è¯•
   - æ€§èƒ½æµ‹è¯•

5. **éƒ¨ç½²é˜¶æ®µ**
   - æµ‹è¯•ç¯å¢ƒéƒ¨ç½²
   - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²
   - ç›‘æ§å’Œå‘Šè­¦
   - ç”¨æˆ·åé¦ˆæ”¶é›†

#### ç¤ºä¾‹ï¼šæ·»åŠ æ–°åŠŸèƒ½

å‡è®¾è¦æ·»åŠ "å†¥æƒ³ç»ƒä¹ "åŠŸèƒ½ï¼š

1. **åˆ›å»ºé¡µé¢**
   ```javascript
   // packages/meditation/index.js
   Page({
     data: {
       exercises: [],
       currentExercise: null,
       isPlaying: false
     },

     onLoad() {
       this.loadExercises();
     },

     startExercise(exercise) {
       this.setData({
         currentExercise: exercise,
         isPlaying: true
       });
     }
   });
   ```

2. **åˆ›å»ºæœåŠ¡**
   ```javascript
   // services/meditation.js
   async function getMeditationExercises() {
     if (shouldUseMock()) {
       return MOCK_MEDITATION_EXERCISES;
     }

     const result = await callFunction('meditationManager', {
       action: 'list'
     });

     return result.data;
   }
   ```

3. **åˆ›å»ºäº‘å‡½æ•°**
   ```javascript
   // cloudfunctions/meditationManager/index.js
   exports.main = async (event, context) => {
     const { action } = event;

     switch (action) {
       case 'list':
         return await listExercises();
       case 'start':
         return await startSession(event.data);
       default:
         return { ok: false, error: 'Unsupported action' };
     }
   };
   ```

### æ·»åŠ æ–°é¡µé¢

#### é¡µé¢åˆ›å»ºæ­¥éª¤

1. **åˆ›å»ºé¡µé¢æ–‡ä»¶**
   ```bash
   mkdir miniprogram/pages/new-page
   cd miniprogram/pages/new-page

   touch index.js index.wxml index.wxss index.json
   ```

2. **é…ç½®é¡µé¢**
   ```javascript
   // index.json
   {
     "navigationBarTitleText": "æ–°é¡µé¢",
     "usingComponents": {}
   }
   ```

3. **å®ç°é¡µé¢é€»è¾‘**
   ```javascript
   // index.js
   Page({
     data: {
       // é¡µé¢æ•°æ®
     },

     onLoad(options) {
       // é¡µé¢åŠ è½½
     },

     onShow() {
       // é¡µé¢æ˜¾ç¤º
     },

     onHide() {
       // é¡µé¢éšè—
     },

     onUnload() {
       // é¡µé¢å¸è½½
     }
   });
   ```

4. **è®¾è®¡é¡µé¢ç»“æ„**
   ```xml
   <!-- index.wxml -->
   <view class="container">
     <view class="header">é¡µé¢æ ‡é¢˜</view>
     <view class="content">é¡µé¢å†…å®¹</view>
   </view>
   ```

5. **æ·»åŠ é¡µé¢æ ·å¼**
   ```css
   /* index.wxss */
   .container {
     padding: 20px;
   }

   .header {
     font-size: 18px;
     font-weight: bold;
   }
   ```

6. **æ³¨å†Œé¡µé¢**
   ```json
   // app.json
   {
     "pages": [
       "pages/new-page/index"
     ]
   }
   ```

### æ·»åŠ æ–°ç»„ä»¶

#### ç»„ä»¶å¼€å‘æ­¥éª¤

1. **åˆ›å»ºç»„ä»¶ç›®å½•**
   ```bash
   mkdir miniprogram/components/new-component
   cd miniprogram/components/new-component

   touch index.js index.wxml index.wxss index.json
   ```

2. **å®šä¹‰ç»„ä»¶**
   ```javascript
   // index.js
   Component({
     properties: {
       title: {
         type: String,
         value: 'é»˜è®¤æ ‡é¢˜'
       }
     },

     data: {
       // ç»„ä»¶å†…éƒ¨æ•°æ®
     },

     methods: {
       onTap() {
         this.triggerEvent('tap', {
           title: this.properties.title
         });
       }
     }
   });
   ```

3. **ä½¿ç”¨ç»„ä»¶**
   ```xml
   <!-- åœ¨é¡µé¢ä¸­ä½¿ç”¨ -->
   <new-component
     title="ç»„ä»¶æ ‡é¢˜"
     bind:tap="onComponentTap"
   />
   ```

### æ•°æ®åº“æ‰©å±•

#### åˆ›å»ºæ–°é›†åˆ

```javascript
// åœ¨äº‘å¼€å‘æ§åˆ¶å°åˆ›å»ºé›†åˆ
// 1. ç™»å½•äº‘å¼€å‘æ§åˆ¶å°
// 2. è¿›å…¥æ•°æ®åº“
// 3. åˆ›å»ºæ–°é›†åˆ
// 4. è®¾ç½®æƒé™è§„åˆ™
```

#### æƒé™è§„åˆ™é…ç½®

```json
{
  "read": "auth.uid == resource._openid || auth.uid == 'admin'",
  "write": "auth.uid == resource._openid || auth.uid == 'admin'",
  "create": "auth.uid != null"
}
```

#### ç´¢å¼•åˆ›å»º

```javascript
// åˆ›å»ºç´¢å¼•
db.collection('new_collection').createIndex({
  _openid: 1,
  created_at: -1
});

// å¤åˆç´¢å¼•
db.collection('new_collection').createIndex({
  _openid: 1,
  status: 1,
  created_at: -1
});
```

### ç¬¬ä¸‰æ–¹é›†æˆ

#### é›†æˆæ–°æœåŠ¡

1. **æ·»åŠ ä¾èµ–**
   ```bash
   npm install third-party-service
   ```

2. **åˆ›å»ºé€‚é…å™¨**
   ```javascript
   // services/thirdPartyAdapter.js
   const ThirdPartyService = require('third-party-service');

   class ThirdPartyAdapter {
     constructor(config) {
       this.client = new ThirdPartyService(config);
     }

     async processData(data) {
       // é€‚é…æ•°æ®æ ¼å¼
       const adaptedData = this.adaptData(data);

       // è°ƒç”¨ç¬¬ä¸‰æ–¹æœåŠ¡
       const result = await this.client.process(adaptData);

       // é€‚é…è¿”å›ç»“æœ
       return this.adaptResult(result);
     }

     adaptData(data) {
       return {
         // æ•°æ®æ ¼å¼è½¬æ¢
       };
     }

     adaptResult(result) {
       return {
         // ç»“æœæ ¼å¼è½¬æ¢
       };
     }
   }

   module.exports = ThirdPartyAdapter;
   ```

3. **é…ç½®ç¯å¢ƒå˜é‡**
   ```javascript
   // config/thirdParty.js
   module.exports = {
     apiKey: process.env.THIRD_PARTY_API_KEY,
     baseUrl: process.env.THIRD_PARTY_BASE_URL,
     timeout: 5000
   };
   ```

---

## ğŸ“š ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£

- [å¾®ä¿¡å°ç¨‹åºå¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [å¾®ä¿¡äº‘å¼€å‘æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/wxcloud/basis/getting-started.html)
- [TDesign ç»„ä»¶åº“æ–‡æ¡£](https://tdesign.tencent.com/miniprogram/components)

### æŠ€æœ¯èµ„æº

- [JavaScript MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript)
- [Node.js å®˜æ–¹æ–‡æ¡£](https://nodejs.org/zh-cn/docs/)
- [Jest æµ‹è¯•æ¡†æ¶](https://jestjs.io/zh-Hans/)

### ç¤¾åŒºèµ„æº

- [å¾®ä¿¡å¼€å‘è€…ç¤¾åŒº](https://developers.weixin.qq.com/community/)
- [GitHub ä»“åº“](https://github.com/your-org/MindGuard)
- [æŠ€æœ¯åšå®¢](https://blog.example.com)

---

## ğŸ“ è”ç³»æˆ‘ä»¬

### å¼€å‘å›¢é˜Ÿ

- **é¡¹ç›®ç»´æŠ¤è€…**: MindGuard å¼€å‘å›¢é˜Ÿ
- **æŠ€æœ¯æ”¯æŒ**: tech-support@mindguard.com
- **é—®é¢˜åé¦ˆ**: GitHub Issues

### è´¡çŒ®è€…

æ„Ÿè°¢æ‰€æœ‰ä¸º MindGuard é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

*æœ¬æ–‡æ¡£ä¼šæŒç»­æ›´æ–°ï¼Œè¯·å…³æ³¨æœ€æ–°ç‰ˆæœ¬ã€‚*

**MindGuard å¼€å‘å›¢é˜Ÿ** ğŸš€
*è®©æŠ€æœ¯æœåŠ¡äºå¿ƒç†å¥åº·*