# 功能：ASK 情绪助理

## 功能简介
ASK 情绪助理提供 AI 驱动的即时对话、情绪疏导与行动建议，深度融合认知行为疗法（CBT/REBT）技巧。当情绪打卡、心情随笔或树洞内容判定为负向时自动弹出，引导用户进行自我对话、认知重构或联系真人支持。

## 所在页面
- 今天 Tab：情绪状态卡右上悬浮入口（负向自动展开）
- 心情随笔 Tab：连续负向随笔弹窗提醒
- 树洞 Tab：在查看中高风险帖子时提供快捷入口
- 全局：保留 FAB 悬浮按钮入口

## 核心CBT/REBT应用

### 1. 认知重构技巧
- **识别非理性信念**：引导用户识别"必须"、"应该"、"灾难化"等非理性思维模式
- **证据检验**：帮助用户寻找支持或反驳非理性信念的证据
- **替代性思考**：引导用户产生更理性、平衡的替代性想法
- **认知灵活性训练**：通过多个角度看待问题，拓展思维视野

### 2. 行为实验设计
- **行为激活**：设计小型行为实验，验证认知改变的可能性
- **渐进式暴露**：针对焦虑情境，设计渐进式的面对策略
- **技能练习**：推荐具体的心理技能练习，如正念、呼吸练习
- **行为记录**：引导用户记录行为尝试的结果和感受

### 3. 情绪调节技巧
- **情绪识别**：帮助用户准确识别和命名情绪
- **情绪接纳**：教导用户接纳而非压抑情绪
- **情绪调节**：提供具体的情绪调节策略和工具
- **情绪表达**：引导健康的情绪表达方式

### 4. 结构化对话流程
```
1. 情绪探索 → 2. 认知识别 → 3. 证据检验 → 4. 认知重构 → 5. 行动计划
```

## 交互说明

### 1. 智能入口触发
- **情绪触发**：情绪打卡检测到负向情绪时自动弹出
- **行为触发**：连续多天未完成任务或行为异常时主动关怀
- **内容触发**：树洞发帖或心情随笔检测到风险内容时介入
- **时间触发**：用户设置的定期心理检查时间
- **手动触发**：用户主动点击FAB按钮开启对话

### 2. CBT对话流程
1. **情绪评估**：AI通过结构化问题评估当前情绪状态
2. **情境澄清**：引导用户描述引发情绪的具体情境
3. **自动思维识别**：帮助用户识别当时的自动想法
4. **认知扭曲识别**：识别常见的认知扭曲模式
5. **证据检验**：引导用户客观评估想法的合理性
6. **替代思维生成**：帮助产生更平衡的替代想法
7. **行为建议制定**：基于认知重构制定具体行动计划
8. **效果跟踪**：后续跟踪认知改变和行为执行效果

### 3. 风险分级响应
- **L1级**：提供基础CBT自助工具和情绪调节技巧
- **L2级**：深入认知重构，推荐结构化CBT练习
- **L3级**：紧急危机干预，强烈建议联系真人支持

### 4. 任务协同机制
- **CBT任务生成**：基于对话内容生成具体的CBT练习任务
- **认知日记模板**：提供结构化的认知记录模板
- **行为实验设计**：帮助用户设计小型行为实验
- **进度跟踪**：跟踪认知改变和行为执行的进度

### 5. 真人协同流程
- **授权获取**：在需要真人介入时，明确说明授权范围
- **信息摘要**：生成最小必要的匿名信息摘要
- **转介桥梁**：作为线上自助和线下专业帮助的桥梁
- **后续跟进**：协助安排后续的跟进和支持

## 界面组件

### CBT对话界面
- **认知重构卡片**：展示"当前想法"vs"替代想法"的对比
- **证据检验表格**：支持/反对证据的结构化展示
- **情绪温度计**：可视化的情绪强度变化
- **认知扭曲提示**：常见认知扭曲模式的识别提示
- **行为实验设计器**：交互式的行为实验设计工具

### 结构化练习模板
- **ABC模型练习**：事件-信念-结果的识别练习
- **认知扭曲清单**：常见认知扭曲的自查清单
- **证据检验工作表**：结构化的证据检验工具
- **替代思维生成器**：帮助产生平衡想法的辅助工具
- **行为实验记录表**：行为实验的设计和记录模板

### 进度跟踪组件
- **认知改变曲线**：可视化展示认知改变的过程
- **行为执行统计**：任务完成情况和效果统计
- **情绪趋势图**：情绪状态的变化趋势
- **技能掌握度**：各种心理技能的掌握程度评估

## 数据需求

### 对话数据
- `ask_sessions`：会话基本信息，包含CBT技术应用类型
- `ask_messages`：对话消息，标记CBT技巧类型和效果
- `cbt_applications`：CBT应用记录，包含具体技巧和使用效果
- `cognitive_changes`：认知改变记录，跟踪思维模式变化

### 认知数据
- `automatic_thoughts`：自动思维记录，包含情境和情绪关联
- `cognitive_distortions`：认知扭曲识别记录
- `evidence_examination`：证据检验过程和结果
- `alternative_thoughts`：替代思维生成和采纳情况

### 行为数据
- `behavior_experiments`：行为实验设计和执行记录
- `skill_practices`：心理技能练习记录
- `cbt_tasks`：CBT相关任务生成和完成情况
- `progress_tracking`：认知和行为改变的跟踪数据

## CBT技巧库

### 核心技巧模块
1. **认知重构技术**
   - 思维记录法
   - 证据检验技术
   - 替代思维生成
   - 认知灵活性训练

2. **行为激活技术**
   - 行为实验设计
   - 渐进式暴露
   - 活动安排表
   - 行为激活策略

3. **情绪调节技术**
   - 情绪识别训练
   - 情绪接纳练习
   - 情绪调节策略
   - 正念练习技术

4. **问题解决技术**
   - 问题结构化分析
   - 解决方案生成
   - 执行计划制定
   - 效果评估反馈

### 技巧应用场景
- **学业压力**：完美主义思维、失败恐惧、时间管理
- **人际关系**：社交焦虑、冲突处理、沟通技巧
- **自我认知**：自我价值感、身份认同、人生规划
- **情绪管理**：焦虑、抑郁、愤怒、压力调节

## 效果评估机制

### 认知改变评估
- **思维模式识别**：用户对认知扭曲的识别能力提升
- **证据检验能力**：用户客观评估想法的能力增强
- **替代思维生成**：用户产生平衡想法的能力改善
- **认知灵活性**：用户多角度思考问题的能力提升

### 行为改变评估
- **任务完成率**：CBT相关任务的完成情况
- **技能应用频率**：心理技能在日常生活中的应用频率
- **行为实验效果**：行为实验的实施效果和收获
- **问题解决能力**：用户独立解决问题的能力提升

### 情绪改善评估
- **情绪强度变化**：负面情绪强度的降低程度
- **情绪调节能力**：用户自主调节情绪的能力提升
- **情绪稳定性**：情绪波动的减少和稳定性增强
- **积极情绪增加**：积极情绪体验的频率和强度增加

## 技术实现

### AI模型训练
- **CBT知识库**：构建专业的CBT理论和技巧知识库
- **对话流程设计**：设计符合CBT原理的结构化对话流程
- **个性化适配**：根据用户特点调整CBT技巧的应用方式
- **效果反馈学习**：基于用户反馈持续优化CBT应用效果

### 数据分析
- **认知模式分析**：分析用户常见的思维模式和认知扭曲
- **行为模式分析**：分析用户行为习惯和改变模式
- **效果预测模型**：预测不同CBT技巧对用户的效果
- **个性化推荐**：基于用户特点推荐最适合的CBT技巧

### 隐私保护
- **数据加密**：对话内容和认知数据加密存储
- **访问控制**：严格的数据访问权限控制
- **匿名化处理**：数据分析时的匿名化处理
- **用户控制**：用户对数据的完全控制权

## 后续优化

### 功能扩展
1. **多模态交互**：支持语音、图像等多种交互方式
2. **社交CBT**：引入同伴支持和小组CBT练习
3. **专业指导**：连接专业心理咨询师的远程指导
4. **长期跟踪**：建立长期认知改变跟踪体系

### 技术优化
1. **深度理解**：提升AI对用户深层需求的理解能力
2. **情感计算**：增强情感识别和情感回应能力
3. **个性化算法**：开发更精准的个性化推荐算法
4. **跨平台整合**：整合多平台数据，构建完整用户画像
