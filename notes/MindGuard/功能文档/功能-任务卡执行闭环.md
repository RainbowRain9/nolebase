# 功能：任务卡执行闭环

## 功能简介
任务卡执行闭环负责将任务从生成、执行到复盘的全流程串联，覆盖 AI 建议、树洞领取、真人指派与自建任务。支持番茄计时、提醒、复盘与反馈回写，为成长统计和周报提供执行数据。

## 所在页面
- 任务 Tab：任务列表、番茄计时器、统计抽屉
- 今天 Tab：任务执行区、番茄快捷入口
- 心情随笔 Tab：随笔派生任务入口
- 树洞 Tab：行动卡领取成功提示
- 我的 Tab：成长统计、周报执行明细

## 交互说明
1. 任务卡展示：卡片包含标题、来源、情绪类别、预计时长、进度状态与快捷按钮。
2. 执行动作：  
   - `开始`：开启番茄计时；支持设置自定义时长。  
   - `暂停`：记录暂停原因，可稍后继续。  
   - `完成`：弹出复盘表单，填写完成感受、情绪变化、备注。  
   - `跳过`：选择原因（情绪波动、资源不足等），记录用于周报分析。  
   - `延期`：设置新的截止时间并记录原因。  
3. 复盘表单：包含情绪前/后评分、文字/语音反馈、是否需要真人跟进勾选。
4. 提醒机制：任务到期前推送提醒；若用户连续跳过，系统自动推荐替代任务或提醒联系辅导员。
5. 真人反馈：来源为心理咨询师/辅导员的任务完成后，生成回执发送给指派人；未按时完成会提醒对方跟进。
6. 数据同步：任务状态变更后更新任务 Tab 列表与统计，同时同步今天页、心情随笔随笔卡及我的页成长面板，必要时触发微建议重新排序。

## 组件列表
- 任务卡片：标题、来源徽章、情绪标签、状态按钮。
- 番茄计时器弹窗：倒计时、暂停/结束按钮、完成提醒。
- 复盘表单：评分滑条、文本域、语音上传、真人跟进勾选。
- 提醒条：任务到期/未复盘提示，附快捷操作。
- 回执面板：展示反馈摘要及发送状态。

## 数据需求
- `task_timer_sessions`：`task_id`、`start_at`、`end_at`、`paused_duration`。
- `task_reviews`：与清单管理共用，新增 `needs_human_followup` 字段。
- `task_notifications`：提醒记录（类型、触发时间、处理状态）。
- `task_acknowledgements`：真人指派任务回执信息。
- 指标输出：完成率、平均完成时长、跳过原因统计，供周报与成长面板使用。
